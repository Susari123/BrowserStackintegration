#!/usr/bin/env node
'use strict';function a37_0x408a(){const _0x314fb6=['slice','port','filter','join','lCGca','nightwatch.conf.js','info','lDJaz','webdriver','forEach','stringify','IORwq','split','1IXRXRn','findIndex','VpwHX','platform','ovOXc','../../helpers/helper','xvrsI','../../helpers/BrowserStackSetup','hZDmF','now','iEnAi','sDibd','test_settings','../utils/constants','config','existsSync','child\x20process\x20exited\x20with\x20code\x20','nightwatch.json','debug','host','fjSAG','niabq','unlinkSync','useW3C','rqTMz','324070ZToqgs','701682BAUrHm','trim','mergeDeep','winstonLogger','--config','11dCBpuC','--env','close','env','modifyBrowserStackCaps','1825866rbgioz','getPlatformName','FXfhQ','5108nOPYvu','cwd','517980WiDVqo','start_process','393294ZWjnHt','1149thgpmu','tiEId','204712dPuYCy','rCHse','18rlHtoo','splice','nightwatch-browserstack.json','AuQPF','test','CFJuW','inherit','nightwatch.cmd','push'];a37_0x408a=function(){return _0x314fb6;};return a37_0x408a();}const a37_0x2d8a9e=a37_0x45b7;(function(_0x1176d3,_0x2aa224){const _0x775ac3=a37_0x45b7,_0x4d7403=_0x1176d3();while(!![]){try{const _0x5242e2=-parseInt(_0x775ac3(0x231))/0x1*(-parseInt(_0x775ac3(0x216))/0x2)+parseInt(_0x775ac3(0x217))/0x3*(parseInt(_0x775ac3(0x212))/0x4)+-parseInt(_0x775ac3(0x214))/0x5+-parseInt(_0x775ac3(0x205))/0x6+-parseInt(_0x775ac3(0x20f))/0x7+parseInt(_0x775ac3(0x219))/0x8*(parseInt(_0x775ac3(0x21b))/0x9)+parseInt(_0x775ac3(0x204))/0xa*(parseInt(_0x775ac3(0x20a))/0xb);if(_0x5242e2===_0x2aa224)break;else _0x4d7403['push'](_0x4d7403['shift']());}catch(_0xfa3d6f){_0x4d7403['push'](_0x4d7403['shift']());}}}(a37_0x408a,0x464c6));function a37_0x45b7(_0xfb4feb,_0x29e2bd){const _0x408a80=a37_0x408a();return a37_0x45b7=function(_0x45b731,_0x359d10){_0x45b731=_0x45b731-0x1f4;let _0x905856=_0x408a80[_0x45b731];return _0x905856;},a37_0x45b7(_0xfb4feb,_0x29e2bd);}const fs=require('fs'),path=require('path'),{spawn}=require('child_process'),logger=require('../../helpers/logger')[a37_0x2d8a9e(0x208)],{default:BrowserStackSetup}=require(a37_0x2d8a9e(0x238)),helper=require(a37_0x2d8a9e(0x236)),constants=require(a37_0x2d8a9e(0x1f8)),getUserNightwatchConfigs=(_0x4f683a,_0x13238d)=>{const _0x9cace4=a37_0x2d8a9e,_0x24e454={'lDJaz':_0x9cace4(0x229),'niabq':_0x9cace4(0x1fc),'ovOXc':function(_0x50a5bb,_0x4a104c){return _0x50a5bb(_0x4a104c);},'lCGca':'Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file'};let _0x281a19=null,_0x1b5a2b={};const _0x15a87d=_0x13238d[_0x9cace4(0x232)](_0x57cb8b=>_0x57cb8b===_0x9cace4(0x209));if(!helper['isUndefined'](_0x4f683a['config'])&&fs['existsSync'](path['join'](process[_0x9cace4(0x213)](),_0x4f683a[_0x9cace4(0x1f9)])))_0x281a19=path[_0x9cace4(0x227)](process[_0x9cace4(0x213)](),_0x4f683a[_0x9cace4(0x1f9)]),_0x13238d['splice'](_0x15a87d,0x2);else{if(fs[_0x9cace4(0x1fa)](path['join'](process[_0x9cace4(0x213)](),_0x24e454[_0x9cace4(0x22b)])))_0x281a19=path[_0x9cace4(0x227)](process[_0x9cace4(0x213)](),_0x24e454[_0x9cace4(0x22b)]);else fs[_0x9cace4(0x1fa)](path[_0x9cace4(0x227)](process[_0x9cace4(0x213)](),_0x24e454[_0x9cace4(0x200)]))&&(_0x281a19=path[_0x9cace4(0x227)](process['cwd'](),_0x24e454[_0x9cace4(0x200)]));}return _0x281a19?(logger[_0x9cace4(0x22a)]('Getting\x20your\x20nightwatch\x20configs\x20from\x20'+_0x281a19),_0x1b5a2b=_0x24e454[_0x9cace4(0x235)](require,_0x281a19)):logger[_0x9cace4(0x22a)](_0x24e454[_0x9cace4(0x228)]),_0x1b5a2b;},removeExistingEnvs=_0x53e61f=>{const _0x330ef0=a37_0x2d8a9e,_0x5993d9={};_0x5993d9[_0x330ef0(0x203)]=function(_0x57dfdc,_0x1c3246){return _0x57dfdc>_0x1c3246;};const _0x55e10e=_0x5993d9;let _0x4fd424=_0x53e61f[_0x330ef0(0x232)](_0x1b0647=>_0x1b0647===_0x330ef0(0x20b));_0x55e10e[_0x330ef0(0x203)](_0x4fd424,-0x1)&&_0x53e61f['splice'](_0x4fd424,0x2),_0x4fd424=_0x53e61f[_0x330ef0(0x232)](_0x3b41a9=>_0x3b41a9==='-e'),_0x55e10e[_0x330ef0(0x203)](_0x4fd424,-0x1)&&_0x53e61f[_0x330ef0(0x21c)](_0x4fd424,0x2);};function run(_0x521ebc,_0x35fe8a,_0x2355fd){const _0x5973c9=a37_0x2d8a9e,_0x4bed12={'fjSAG':'nightwatch','hZDmF':function(_0x22d5ca,_0x1e54a1){return _0x22d5ca+_0x1e54a1;},'FXfhQ':'test_settings','xvrsI':function(_0x501075,_0x8d2663,_0x24dcd0){return _0x501075(_0x8d2663,_0x24dcd0);},'rCHse':'hub.browserstack.com','AuQPF':'Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','tiEId':function(_0x1a4269,_0x47edc6){return _0x1a4269===_0x47edc6;},'giFXO':_0x5973c9(0x21d),'BkQpd':function(_0x457d1e,_0x1c4c69){return _0x457d1e(_0x1c4c69);},'VpwHX':function(_0x251528,_0x35a338,_0x27635d,_0x170ef2){return _0x251528(_0x35a338,_0x27635d,_0x170ef2);},'MxcTy':_0x5973c9(0x222),'sDibd':_0x5973c9(0x209),'CFJuW':_0x5973c9(0x20b),'IORwq':_0x5973c9(0x221),'iEnAi':_0x5973c9(0x20c)};if(!_0x2355fd[_0x5973c9(0x1f9)])return;const _0x22d6df=_0x4bed12[_0x5973c9(0x237)](getUserNightwatchConfigs,_0x521ebc,_0x35fe8a),_0x2dfce9={};_0x2dfce9[_0x5973c9(0x215)]=![];const _0xfe2be6={};_0xfe2be6[_0x5973c9(0x1fe)]=_0x4bed12[_0x5973c9(0x21a)],_0xfe2be6[_0x5973c9(0x225)]=0x1bb;const _0x2ca27a={};_0x2ca27a[_0x5973c9(0x22c)]=_0x2dfce9,_0x2ca27a['selenium']=_0xfe2be6;const _0x241dcf=_0x2ca27a;logger[_0x5973c9(0x22a)](_0x4bed12[_0x5973c9(0x21e)]);const _0x569064={..._0x22d6df},_0x597a06=_0x569064,_0x26b2f9=helper[_0x5973c9(0x202)](_0x2355fd[_0x5973c9(0x1f9)]),_0x58c3a1=[];_0x2355fd['config']['platforms'][_0x5973c9(0x22d)]((_0x37237a,_0x1df081)=>{const _0xf4d508=_0x5973c9;_0x26b2f9?_0x58c3a1[_0xf4d508(0x223)](helper['modifyBrowserStackW3CCaps'](_0x2355fd[_0xf4d508(0x1f9)],_0x4bed12['fjSAG'],_0x1df081)):_0x58c3a1['push'](helper[_0xf4d508(0x20e)](_0x2355fd[_0xf4d508(0x1f9)],_0x4bed12[_0xf4d508(0x1ff)],_0x1df081));});const _0x56f88d={},_0x1e66b2=[];_0x521ebc['env']=_0x521ebc[_0x5973c9(0x20d)]||_0x521ebc['e'];const _0x56832d=_0x521ebc[_0x5973c9(0x20d)]?_0x521ebc[_0x5973c9(0x20d)][_0x5973c9(0x206)]()[_0x5973c9(0x230)](',')['map'](_0x26793b=>_0x26793b['trim']())[_0x5973c9(0x226)](_0x22c3b1=>_0x22c3b1!==''):[''];_0x4bed12[_0x5973c9(0x218)](_0x56832d['length'],0x0)&&_0x56832d[_0x5973c9(0x223)]('');_0x56832d[_0x5973c9(0x22d)](_0x3e3a6d=>{const _0x2f4432=_0x5973c9;_0x58c3a1[_0x2f4432(0x22d)](_0x1cd126=>{const _0x1c0c31=_0x2f4432;let _0x241cbc=_0x4bed12[_0x1c0c31(0x239)](helper[_0x1c0c31(0x210)](_0x1cd126,'_'),'_'+Date[_0x1c0c31(0x1f4)]());_0x3e3a6d&&(_0x241cbc+='_'+_0x3e3a6d);if(_0x3e3a6d&&(!_0x22d6df[_0x4bed12[_0x1c0c31(0x211)]]||!_0x22d6df[_0x4bed12[_0x1c0c31(0x211)]][_0x3e3a6d]))return;const _0x397958={..._0x241dcf};_0x397958['desiredCapabilities']=_0x1cd126;const _0x2ca74b=_0x397958;_0x56f88d[_0x241cbc]=_0x3e3a6d?helper[_0x1c0c31(0x207)](_0x22d6df[_0x4bed12['FXfhQ']][_0x3e3a6d],_0x2ca74b):_0x2ca74b,_0x1e66b2['push'](_0x241cbc);});});!_0x597a06[_0x5973c9(0x1f7)]&&(_0x597a06['test_settings']={});_0x597a06[_0x5973c9(0x1f7)]={..._0x597a06[_0x5973c9(0x1f7)],..._0x56f88d};const _0x55cbdc=path[_0x5973c9(0x227)](__dirname,_0x4bed12['giFXO']);fs['writeFileSync'](_0x55cbdc,JSON[_0x5973c9(0x22e)](_0x597a06)),_0x4bed12['BkQpd'](removeExistingEnvs,_0x35fe8a);const _0x45a264=_0x4bed12[_0x5973c9(0x233)](spawn,/^win/[_0x5973c9(0x21f)](process[_0x5973c9(0x234)])?_0x4bed12['MxcTy']:_0x4bed12[_0x5973c9(0x1ff)],[_0x4bed12[_0x5973c9(0x1f6)],_0x55cbdc,..._0x35fe8a[_0x5973c9(0x224)](0x1),_0x4bed12[_0x5973c9(0x220)],_0x1e66b2[_0x5973c9(0x227)](',')],{'stdio':_0x4bed12[_0x5973c9(0x22f)]});_0x45a264['on'](_0x4bed12[_0x5973c9(0x1f5)],async _0x2223b9=>{const _0x5e5a30=_0x5973c9;logger[_0x5e5a30(0x1fd)](_0x5e5a30(0x1fb)+_0x2223b9),logger[_0x5e5a30(0x22a)]('Deleting\x20'+_0x55cbdc),fs[_0x5e5a30(0x201)](_0x55cbdc);});}module['exports']=run;