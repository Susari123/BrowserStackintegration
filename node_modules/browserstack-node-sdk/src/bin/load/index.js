#!/usr/bin/env node
'use strict';function a28_0x3b33(){const _0x47a84e=['BROWSERSTACK_USER','Failed\x20initiating\x20load\x20test:\x20','32obGjAK','winstonLogger','UiKlH','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','HqxVf',',\x20forwarding\x20to\x20child\x20process...','readConfig','Error\x20Details:\x20','../v2/cliUtils','checkAndUpdateCli','537776xSknRv','message','BROWSERSTACK_USERNAME','join','bsPVr','lpVht','slice','rlWCh','inherit','Received\x20','env','BROWSERSTACK_ACCESS_KEY','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','SIGTERM','LOCrb','vvSHF','TtVtp','Error\x20details:\x20','SIGHUP','userName','Waiting\x20for\x20child\x20process\x20to\x20exit...','exports','Spawning:\x20','./loadUtils','getCliDir','debug','928YgsCJx','Configuration\x20path:\x20','stringify','DzBpu','zvZGO','2653320kvSkLI','5964goXpKB','QutyA','ETOXM','crMkY','vkVlB','accessKey','Error\x20loading\x20configuration:\x20','128030MsGbWh','exit','close','442222DeUtZi','Executing\x20load\x20test\x20with\x20arguments:\x20','iDYBR','TIypO','BROWSERSTACK_ACCESSKEY','getExistingCliPath','stack','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','error','SIGQUIT','2128530gOxwKF','WNSGv','hixDA','argv','1748133dXZKuX','SIGINT'];a28_0x3b33=function(){return _0x47a84e;};return a28_0x3b33();}const a28_0x1a6f83=a28_0x1906;(function(_0x341a64,_0x1172cb){const _0xb48ee5=a28_0x1906,_0x397381=_0x341a64();while(!![]){try{const _0x1f9592=parseInt(_0xb48ee5(0x1a9))/0x1+parseInt(_0xb48ee5(0x1d3))/0x2+parseInt(_0xb48ee5(0x1c9))/0x3*(-parseInt(_0xb48ee5(0x1c3))/0x4)+parseInt(_0xb48ee5(0x1de))/0x5+-parseInt(_0xb48ee5(0x1c8))/0x6+-parseInt(_0xb48ee5(0x1d0))/0x7*(parseInt(_0xb48ee5(0x1e6))/0x8)+parseInt(_0xb48ee5(0x1e2))/0x9;if(_0x1f9592===_0x1172cb)break;else _0x397381['push'](_0x397381['shift']());}catch(_0x36d762){_0x397381['push'](_0x397381['shift']());}}}(a28_0x3b33,0x6233a));function a28_0x1906(_0x17c210,_0x42d219){const _0x3b332c=a28_0x3b33();return a28_0x1906=function(_0x1906e4,_0x552ff3){_0x1906e4=_0x1906e4-0x1a1;let _0x34617e=_0x3b332c[_0x1906e4];return _0x34617e;},a28_0x1906(_0x17c210,_0x42d219);}const {spawn}=require('child_process'),path=require('path'),helper=require('../../helpers/helper'),CLIUtils=require(a28_0x1a6f83(0x1a7)),{getLoadConfigPath,sleep}=require(a28_0x1a6f83(0x1c0)),logger=require('../../helpers/logger')[a28_0x1a6f83(0x1e7)];async function executeLoadTest(_0x43c9b7){const _0x315a00=a28_0x1a6f83,_0x39726d={'LOCrb':function(_0x35e962,_0xf1f165){return _0x35e962(_0xf1f165);},'zvZGO':_0x315a00(0x1d2),'lpVht':_0x315a00(0x1bd),'sUOES':_0x315a00(0x1da),'vvSHF':function(_0x578eda){return _0x578eda();},'HqxVf':_0x315a00(0x1a2),'TIypO':function(_0x3c322d){return _0x3c322d();},'rlWCh':'Failed\x20to\x20determine\x20CLI\x20directory','tgzPU':'CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','ETOXM':_0x315a00(0x1b5),'bsPVr':_0x315a00(0x1db),'hixDA':function(_0x1e024f,_0x2d82b6,_0x2237fd,_0x1e619f){return _0x1e024f(_0x2d82b6,_0x2237fd,_0x1e619f);},'rPfUT':'load','DzBpu':_0x315a00(0x1b1),'UiKlH':_0x315a00(0x1e3),'iDYBR':_0x315a00(0x1b6),'vkVlB':_0x315a00(0x1dd),'crMkY':_0x315a00(0x1bb),'WNSGv':function(_0x23e7f6){return _0x23e7f6();}};try{const _0x13abf1=process['argv'][_0x315a00(0x1af)](0x2),_0x4e2718=_0x13abf1[_0x315a00(0x1af)](0x1);logger[_0x315a00(0x1c2)](_0x315a00(0x1d4)+_0x4e2718);let _0x2dfa8c={};try{logger[_0x315a00(0x1c2)](_0x39726d['sUOES']);const _0x767d86={};_0x767d86[_0x315a00(0x1bc)]=process['env'][_0x315a00(0x1ab)]||process[_0x315a00(0x1b3)][_0x315a00(0x1e4)],_0x767d86[_0x315a00(0x1ce)]=process[_0x315a00(0x1b3)][_0x315a00(0x1b4)]||process['env'][_0x315a00(0x1d7)],_0x2dfa8c=_0x767d86;if(!_0x2dfa8c[_0x315a00(0x1bc)]||!_0x2dfa8c['accessKey']){const _0x592e9b=_0x39726d['LOCrb'](getLoadConfigPath,_0x43c9b7[_0x315a00(0x1e1)]);logger[_0x315a00(0x1c2)](_0x315a00(0x1c4)+_0x592e9b),_0x592e9b&&(_0x2dfa8c=helper[_0x315a00(0x1a5)](_0x592e9b));}}catch(_0x5f2a37){logger[_0x315a00(0x1dc)](_0x315a00(0x1cf)+_0x5f2a37['message']),logger['debug'](_0x315a00(0x1ba)+(_0x5f2a37[_0x315a00(0x1d9)]||JSON['stringify'](_0x5f2a37))),await _0x39726d[_0x315a00(0x1b8)](sleep),process[_0x315a00(0x1d1)](0x1);}(!_0x2dfa8c['userName']||!_0x2dfa8c[_0x315a00(0x1ce)])&&(logger[_0x315a00(0x1dc)](_0x39726d[_0x315a00(0x1a3)]),await _0x39726d['TIypO'](sleep),process[_0x315a00(0x1d1)](0x1));const _0xc23a54=CLIUtils[_0x315a00(0x1c1)]();!_0xc23a54&&(logger['error'](_0x39726d[_0x315a00(0x1b0)]),await _0x39726d[_0x315a00(0x1d6)](sleep),process[_0x315a00(0x1d1)](0x1));let _0x2e2bdd=CLIUtils[_0x315a00(0x1d8)](_0xc23a54);try{!_0x2e2bdd?(logger[_0x315a00(0x1c2)](_0x39726d['tgzPU']),_0x2e2bdd=await CLIUtils[_0x315a00(0x1a8)]('',_0xc23a54,_0x2dfa8c)):(logger[_0x315a00(0x1c2)](_0x39726d[_0x315a00(0x1cb)]),_0x2e2bdd=await CLIUtils[_0x315a00(0x1a8)](_0x2e2bdd,_0xc23a54,_0x2dfa8c));}catch(_0x487aef){logger[_0x315a00(0x1dc)](_0x39726d[_0x315a00(0x1a3)]),logger[_0x315a00(0x1c2)](_0x315a00(0x1a6)+(_0x487aef[_0x315a00(0x1d9)]||JSON[_0x315a00(0x1c5)](_0x487aef))),await _0x39726d['vvSHF'](sleep),process[_0x315a00(0x1d1)](0x1);}!_0x2e2bdd&&(logger[_0x315a00(0x1dc)](_0x39726d[_0x315a00(0x1a3)]),logger[_0x315a00(0x1c2)](_0x39726d[_0x315a00(0x1ad)]),await _0x39726d[_0x315a00(0x1d6)](sleep),process[_0x315a00(0x1d1)](0x1));logger['debug'](_0x315a00(0x1bf)+_0x2e2bdd+'\x20load\x20'+_0x4e2718[_0x315a00(0x1ac)]('\x20'));const _0x4db73e=_0x39726d[_0x315a00(0x1e0)](spawn,_0x2e2bdd,[_0x39726d['rPfUT'],..._0x4e2718],{'stdio':_0x39726d[_0x315a00(0x1c6)]});let _0x421c86=![];const _0x27a795=new Promise(_0x3a340b=>{const _0x35e0b7=_0x315a00,_0x4e8866={'TtVtp':function(_0x478ba5,_0x2b02e7){const _0x28e29d=a28_0x1906;return _0x39726d[_0x28e29d(0x1b7)](_0x478ba5,_0x2b02e7);}};_0x4db73e['on'](_0x39726d[_0x35e0b7(0x1c7)],_0x153705=>{const _0x26daa0=_0x35e0b7;logger[_0x26daa0(0x1c2)](_0x2e2bdd+'\x20exited\x20with\x20code\x20'+_0x153705),_0x4e8866[_0x26daa0(0x1b9)](_0x3a340b,_0x153705);});});[_0x39726d[_0x315a00(0x1a1)],_0x39726d[_0x315a00(0x1d5)],_0x39726d[_0x315a00(0x1cd)],_0x39726d[_0x315a00(0x1cc)]]['forEach'](_0x1ad373=>{const _0x4f233f=_0x315a00,_0x13e172={};_0x13e172[_0x4f233f(0x1ca)]=_0x39726d[_0x4f233f(0x1ae)];const _0x4032c2=_0x13e172;process['on'](_0x1ad373,()=>{const _0x509509=_0x4f233f;if(_0x421c86)return;_0x421c86=!![],logger['debug'](_0x509509(0x1b2)+_0x1ad373+_0x509509(0x1a4)),_0x4db73e&&!_0x4db73e['killed']&&(_0x4db73e['kill'](_0x1ad373),logger[_0x509509(0x1c2)](_0x4032c2[_0x509509(0x1ca)]));});});const _0x4b3042=await _0x27a795;await _0x39726d[_0x315a00(0x1df)](sleep),process[_0x315a00(0x1d1)](_0x4b3042);}catch(_0x53f96e){logger[_0x315a00(0x1dc)](_0x315a00(0x1e5)+_0x53f96e[_0x315a00(0x1aa)]),logger['debug']('Error\x20details:\x20'+(_0x53f96e[_0x315a00(0x1d9)]||JSON[_0x315a00(0x1c5)](_0x53f96e))),await _0x39726d[_0x315a00(0x1df)](sleep),process[_0x315a00(0x1d1)](0x1);}}module[a28_0x1a6f83(0x1be)]=executeLoadTest;