const a86_0x5fac3c=a86_0x303a;(function(_0x45367b,_0x56edcd){const _0x458c8d=a86_0x303a,_0x22fcd8=_0x45367b();while(!![]){try{const _0x194305=-parseInt(_0x458c8d(0x1da))/0x1+-parseInt(_0x458c8d(0x19a))/0x2+-parseInt(_0x458c8d(0x1ef))/0x3*(parseInt(_0x458c8d(0x1f0))/0x4)+parseInt(_0x458c8d(0x1b9))/0x5*(-parseInt(_0x458c8d(0x1c9))/0x6)+-parseInt(_0x458c8d(0x1c5))/0x7*(parseInt(_0x458c8d(0x193))/0x8)+parseInt(_0x458c8d(0x194))/0x9+-parseInt(_0x458c8d(0x1ab))/0xa*(-parseInt(_0x458c8d(0x1ac))/0xb);if(_0x194305===_0x56edcd)break;else _0x22fcd8['push'](_0x22fcd8['shift']());}catch(_0x279564){_0x22fcd8['push'](_0x22fcd8['shift']());}}}(a86_0x1525,0x9f6a9));function a86_0x1525(){const _0x41d30e=['testhubConfig','vlMDd','PzOaN','wEqnF','1048CSHeDL','10002429QmCrxT','./framework/constants/testFrameworkConstants','DyMRE','getInstance','trackFile','debug','1265646nuSHTi','buildHashedId','trim','KEY_FILE_NAME','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','mSjkg','fdEvB','LPaym','http','currentTest','unlinkSync','qfBdj','CKqda','wMzCH','recursive','udtsE','kRyjk','20gmZoNK','15333637XsJSvS','WBWcy','basename','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','getState','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','nqzMr','statSync','QKYwr','.browserstack','uploadAttachments','vHuPi','apoIS','5258195wlWVkt','statusCode','toFixed','startsWith','Cleared\x20attachment\x20folder','retry','logger','toObject','KduFk','https://','./modules/playwrightDriverModule','SxMun','58863VEgMPc','homedir','createWriteStream','size','6RnRLxj','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','KEY_TEST_ATTACHMENTS','darYw','./TestInfo','rmSync','ndJYk','exports','force','Ypppv','__workerDetails','existsSync','close','VJgEz','fjubY','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','TIBff','397382trmVip','Created\x20folder:\x20%s','Created\x20.browserstack\x20folder\x20at:\x20%s','TestLevel','error','format','getTestIdentifierFromTestInfo','modules','Iwlaq','dHPDj','mkdirSync','OlJxu','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','KEY_TEST_ID','http://','setTestDetails','testInfo','VGESN','message','join','aLsay','21sIpfXn','35956bDYvAP','util','TestHubModule','getTrackedInstance','LRkgO'];a86_0x1525=function(){return _0x41d30e;};return a86_0x1525();}const os=require('os'),fs=require('fs'),path=require('path'),util=require(a86_0x5fac3c(0x1f1)),BrowserstackCLI=require('./browserstackCLI'),https=require('https'),http=require(a86_0x5fac3c(0x1a2)),AutomationFramework=require('./framework/automationFramework'),PlaywrightDriverModule=require(a86_0x5fac3c(0x1c3)),TestInfo=require(a86_0x5fac3c(0x1cd)),TestFrameworkConstants=require(a86_0x5fac3c(0x195)),{createClassLogger}=require('../../helpers/classLogger.js');function a86_0x303a(_0x5c8cd6,_0x1968f6){const _0x15250=a86_0x1525();return a86_0x303a=function(_0x303a83,_0x1758b5){_0x303a83=_0x303a83-0x191;let _0x5e504f=_0x15250[_0x303a83];return _0x5e504f;},a86_0x303a(_0x5c8cd6,_0x1968f6);}class uploadAttachmentsManager{static [a86_0x5fac3c(0x1bf)]=createClassLogger('uploadAttachmentsManager');static[a86_0x5fac3c(0x1b6)](_0xefa37a,_0xcc96fd=![]){const _0x2642ba=a86_0x5fac3c,_0x41fe27={};_0x41fe27[_0x2642ba(0x1e3)]=function(_0x109760,_0x1db95f){return _0x109760/_0x1db95f;},_0x41fe27[_0x2642ba(0x1eb)]=function(_0x1b0b3b,_0x593704){return _0x1b0b3b*_0x593704;},_0x41fe27['wEqnF']=function(_0x102052,_0x2841c9){return _0x102052>_0x2841c9;},_0x41fe27[_0x2642ba(0x1b8)]='Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.',_0x41fe27[_0x2642ba(0x1d7)]='File\x20downloaded\x20to:\x20%s',_0x41fe27[_0x2642ba(0x1d6)]=function(_0x511d1d,_0x27e0bf){return _0x511d1d===_0x27e0bf;},_0x41fe27[_0x2642ba(0x1b2)]='finish',_0x41fe27['KduFk']=_0x2642ba(0x19e),_0x41fe27[_0x2642ba(0x1d9)]='Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload',_0x41fe27['kRyjk']='Attachment\x20recevied\x20for\x20path:\x20%s',_0x41fe27['DyMRE']=_0x2642ba(0x1b5),_0x41fe27[_0x2642ba(0x1e5)]='.browserstack\x20folder\x20not\x20found\x20at:\x20%s',_0x41fe27[_0x2642ba(0x1c4)]=_0x2642ba(0x1dc),_0x41fe27[_0x2642ba(0x1b7)]=_0x2642ba(0x1db),_0x41fe27[_0x2642ba(0x1f6)]=_0x2642ba(0x1af),_0x41fe27['LRkgO']=_0x2642ba(0x1c2),_0x41fe27['fdEvB']=_0x2642ba(0x1e8),_0x41fe27[_0x2642ba(0x1a6)]=_0x2642ba(0x1de),_0x41fe27['RMvYG']=_0x2642ba(0x1d8),_0x41fe27['QKYwr']=function(_0x1713a0,_0x11b3c7){return _0x1713a0*_0x11b3c7;},_0x41fe27[_0x2642ba(0x1a7)]=_0x2642ba(0x1ca);const _0x6b9e40=_0x41fe27;this[_0x2642ba(0x1bf)]['debug'](util[_0x2642ba(0x1df)](_0x6b9e40[_0x2642ba(0x1aa)],_0xefa37a));const _0x5745f7=os[_0x2642ba(0x1c6)](),_0x2ad6f3=path[_0x2642ba(0x1ed)](_0x5745f7,_0x6b9e40[_0x2642ba(0x196)]);!fs[_0x2642ba(0x1d4)](_0x2ad6f3)&&(this[_0x2642ba(0x1bf)][_0x2642ba(0x199)](util[_0x2642ba(0x1df)](_0x6b9e40[_0x2642ba(0x1e5)],_0x2ad6f3)),fs[_0x2642ba(0x1e4)](_0x2ad6f3),this['logger']['debug'](util[_0x2642ba(0x1df)](_0x6b9e40[_0x2642ba(0x1c4)],_0x2ad6f3)));const _0x30c3cf=BrowserstackCLI[_0x2642ba(0x197)]()[_0x2642ba(0x1e1)][_0x2642ba(0x1f2)]?.['testhubConfig']?.[_0x2642ba(0x1c0)]()?.[_0x2642ba(0x19b)],_0x2a9aca=path[_0x2642ba(0x1ed)](_0x2ad6f3,_0x30c3cf);!fs[_0x2642ba(0x1d4)](_0x2a9aca)&&(fs[_0x2642ba(0x1e4)](_0x2a9aca),this[_0x2642ba(0x1bf)][_0x2642ba(0x199)](util[_0x2642ba(0x1df)](_0x6b9e40[_0x2642ba(0x1b7)],_0x2a9aca)));if(_0x6b9e40[_0x2642ba(0x1d6)](_0xefa37a[_0x2642ba(0x19c)](),'')){this[_0x2642ba(0x1bf)][_0x2642ba(0x199)](util[_0x2642ba(0x1df)](_0x6b9e40['vlMDd']));return;}if(_0xefa37a[_0x2642ba(0x1bc)](_0x6b9e40[_0x2642ba(0x1f4)])||_0xefa37a['startsWith'](_0x6b9e40[_0x2642ba(0x1a0)])){const _0x2d9bda=_0xefa37a['startsWith'](_0x6b9e40[_0x2642ba(0x1f4)])?https:http,_0x361f37=path['basename'](_0xefa37a),_0x550153=path[_0x2642ba(0x1ed)](_0x2a9aca,_0x361f37),_0x1d83cd=fs[_0x2642ba(0x1c7)](_0x550153);_0x2d9bda['get'](_0xefa37a,_0x49c15f=>{const _0x3ef748=_0x2642ba,_0x1e0dc8={'Iwlaq':function(_0x42ca7a,_0x77d0f6){const _0x44564a=a86_0x303a;return _0x6b9e40[_0x44564a(0x1e3)](_0x42ca7a,_0x77d0f6);},'jziZl':function(_0x4e450a,_0x5401e9){const _0x5e5a56=a86_0x303a;return _0x6b9e40[_0x5e5a56(0x1eb)](_0x4e450a,_0x5401e9);},'Ypppv':function(_0x21a1c7,_0x2fa3e5){const _0x8dddc8=a86_0x303a;return _0x6b9e40[_0x8dddc8(0x192)](_0x21a1c7,_0x2fa3e5);},'aLsay':_0x6b9e40[_0x3ef748(0x1b8)],'qfBdj':_0x6b9e40[_0x3ef748(0x1d7)]};if(_0x6b9e40[_0x3ef748(0x1d6)](_0x49c15f[_0x3ef748(0x1ba)],0xc8))_0x49c15f['pipe'](_0x1d83cd),_0x1d83cd['on'](_0x6b9e40['nqzMr'],()=>{const _0xce6344=_0x3ef748;_0x1d83cd['close']();const _0x281a52=fs[_0xce6344(0x1b3)](_0x550153),_0x541cbe=_0x1e0dc8[_0xce6344(0x1e2)](_0x281a52[_0xce6344(0x1c8)],_0x1e0dc8['jziZl'](0x400,0x400));if(_0x1e0dc8[_0xce6344(0x1d2)](_0x541cbe,0x64)){this[_0xce6344(0x1bf)][_0xce6344(0x199)](util[_0xce6344(0x1df)](_0x1e0dc8[_0xce6344(0x1ee)],_0x541cbe[_0xce6344(0x1bb)](0x2))),fs['unlinkSync'](_0x550153);return;}this[_0xce6344(0x1bf)][_0xce6344(0x199)](util[_0xce6344(0x1df)](_0x1e0dc8[_0xce6344(0x1a5)],_0x550153)),uploadAttachmentsManager[_0xce6344(0x198)](_0x550153,_0xcc96fd);});else{this[_0x3ef748(0x1bf)][_0x3ef748(0x199)](util['format'](_0x6b9e40[_0x3ef748(0x1c1)],_0x49c15f[_0x3ef748(0x1ba)])),_0x1d83cd[_0x3ef748(0x1d5)](),fs[_0x3ef748(0x1a4)](_0x550153);return;}})['on'](_0x6b9e40['CKqda'],_0x8e7450=>{const _0x161a1b=_0x2642ba;this[_0x161a1b(0x1bf)][_0x161a1b(0x199)](util[_0x161a1b(0x1df)](_0x6b9e40[_0x161a1b(0x1d9)],_0x8e7450[_0x161a1b(0x1ec)])),_0x1d83cd[_0x161a1b(0x1d5)](),fs[_0x161a1b(0x1a4)](_0x550153);return;});}else{if(!fs[_0x2642ba(0x1d4)](_0xefa37a)){this[_0x2642ba(0x1bf)]['debug'](util['format'](_0x6b9e40['RMvYG'],_0xefa37a));return;}const _0x263324=fs[_0x2642ba(0x1b3)](_0xefa37a),_0x5b3ce4=_0x6b9e40[_0x2642ba(0x1e3)](_0x263324[_0x2642ba(0x1c8)],_0x6b9e40[_0x2642ba(0x1b4)](0x400,0x400));if(_0x6b9e40[_0x2642ba(0x192)](_0x5b3ce4,0x64)){this[_0x2642ba(0x1bf)][_0x2642ba(0x199)](util[_0x2642ba(0x1df)](_0x6b9e40[_0x2642ba(0x1a7)],_0x5b3ce4[_0x2642ba(0x1bb)](0x2)));return;}const _0x4c9fea=path[_0x2642ba(0x1ae)](_0xefa37a),_0x16cf93=path[_0x2642ba(0x1ed)](_0x2a9aca,_0x4c9fea);fs['copyFileSync'](_0xefa37a,_0x16cf93),uploadAttachmentsManager['trackFile'](_0x16cf93,_0xcc96fd);}}static[a86_0x5fac3c(0x198)](_0x3ac64b,_0x512e93){const _0x516e00=a86_0x5fac3c,_0x429173={};_0x429173['ndJYk']='BuildLevel',_0x429173[_0x516e00(0x1cc)]=_0x516e00(0x1dd),_0x429173[_0x516e00(0x191)]=_0x516e00(0x1e6),_0x429173[_0x516e00(0x1a1)]=_0x516e00(0x1b1);const _0x4c64d8=_0x429173;try{let _0x1a42a1;const _0x38bc5a=global[_0x516e00(0x1d3)]?.[_0x516e00(0x1a3)]?.[_0x516e00(0x1ea)];if(!_0x38bc5a){const _0x32253a=AutomationFramework[_0x516e00(0x1f3)]();_0x1a42a1=AutomationFramework[_0x516e00(0x1b0)](_0x32253a,PlaywrightDriverModule[_0x516e00(0x1e7)],'');}else _0x1a42a1=TestInfo[_0x516e00(0x1e0)](_0x38bc5a,_0x38bc5a[_0x516e00(0x1be)]);const _0x3f108e=TestInfo['getTestDetails'](_0x1a42a1),_0x37dc4e=_0x3f108e[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{};_0x37dc4e[_0x3ac64b]={[TestFrameworkConstants['KEY_FILE_SIZE']]:fs[_0x516e00(0x1b3)](_0x3ac64b)[_0x516e00(0x1c8)],[TestFrameworkConstants[_0x516e00(0x19d)]]:path[_0x516e00(0x1ae)](_0x3ac64b),[TestFrameworkConstants['KEY_FILE_PATH']]:_0x3ac64b,[TestFrameworkConstants['KEY_FILE_LEVEL']]:_0x512e93?_0x4c64d8[_0x516e00(0x1cf)]:_0x4c64d8['darYw']},_0x3f108e[TestFrameworkConstants[_0x516e00(0x1cb)]]=_0x37dc4e,TestInfo[_0x516e00(0x1e9)](_0x1a42a1,_0x3f108e),this[_0x516e00(0x1bf)][_0x516e00(0x199)](util[_0x516e00(0x1df)](_0x4c64d8[_0x516e00(0x191)],_0x3ac64b));}catch(_0x3ad0da){this[_0x516e00(0x1bf)][_0x516e00(0x199)](util['format'](_0x4c64d8[_0x516e00(0x1a1)],_0x3ad0da['message']));}}static['clearAttachments'](){const _0x384738=a86_0x5fac3c,_0x11a32d={};_0x11a32d[_0x384738(0x19f)]='.browserstack',_0x11a32d[_0x384738(0x1ad)]='No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s',_0x11a32d['udtsE']=_0x384738(0x1bd);const _0x4beb25=_0x11a32d,_0x2af916=os['homedir'](),_0x54e78a=path[_0x384738(0x1ed)](_0x2af916,_0x4beb25[_0x384738(0x19f)]);if(!fs['existsSync'](_0x54e78a))return;const _0x47d2ce=BrowserstackCLI[_0x384738(0x197)]()[_0x384738(0x1e1)][_0x384738(0x1f2)]?.[_0x384738(0x1f5)]?.[_0x384738(0x1c0)]()?.['buildHashedId'],_0x50590c=_0x47d2ce?path[_0x384738(0x1ed)](_0x54e78a,_0x47d2ce):null;if(!_0x50590c||!fs[_0x384738(0x1d4)](_0x50590c)){this[_0x384738(0x1bf)][_0x384738(0x199)](util[_0x384738(0x1df)](_0x4beb25[_0x384738(0x1ad)],_0x47d2ce));return;}const _0x53e064={};_0x53e064[_0x384738(0x1a8)]=!![],_0x53e064[_0x384738(0x1d1)]=!![],fs[_0x384738(0x1ce)](_0x50590c,_0x53e064),this[_0x384738(0x1bf)]['debug'](util['format'](_0x4beb25[_0x384738(0x1a9)]));}}module[a86_0x5fac3c(0x1d0)]=uploadAttachmentsManager;