function a82_0x2a1d(){const _0x2df843=['KRadH','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','728320KUFmlr','Error\x20in\x20sendTestFrameworkEvent:\x20','TestHubModule','../state/automationFrameworkState.js','getTestDetails','testhubConfig','\x20hookState:\x20','getCurrentTestState','testUuid','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','testFrameworkName','length','TEST','testInfo','onPageCreate','env','getContext','testFrameworkEvent','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','testFrameworkData','BROWSERSTACK_TESTHUB_UUID','debug','1648734VCYloT','platformIndex','../state/testFrameworkState.js','../TestInfo.js','values','getTestIdentifierFromTestInfo','split','../../../helpers/testhub/constants','APssJ','getState','from','BROWSERSTACK_TESTHUB_JWT','test_deferred','matchHookRegex','wEVyV','automationSession','hnGfc','6|3|1|5|0|2|4|7','toString','frameworkName','util','keys','executionContext','jUsPm','logger','getProcessId','version','../../../helpers/helper.js','GeAma','getRef','format','getId','KEY_TEST_FRAMEWORK_VERSION','../framework/testFramework.js','error','CREATE','1996264hCTyiV','11LPjjTn','O11yHashedID','../framework/automationFramework.js','../../../helpers/classLogger.js','testSessionEvent','stringify','KEY_HUB_URL','./playwrightDriverModule.js','frameworkVersion','base64','instance','onAllTestEvents','testFrameworkState','getInstance','MODULE_NAME','../framework/constants/testFrameworkConstants.js','getThreadId','hookState','72086iQWcsJ','registerObserver','getTestId','1182592DukPTy','testFrameworkVersion','../state/hookState.js','rdnLb','KEY_SESSION_ID','../grpcClient.js','name','retry','forEach','42453xmriHu','page','nwELe','JEST','createTestFrameworkEventPayload','CUCUMBER','7QpwhFE','KEY_PLATFORM_INDEX','sendTestFrameworkEvent','5505201AtimDc','./baseModule','getBuildHashedId'];a82_0x2a1d=function(){return _0x2df843;};return a82_0x2a1d();}const a82_0x4518ba=a82_0xe212;(function(_0x18f11d,_0x155861){const _0x4f3100=a82_0xe212,_0x33a7e7=_0x18f11d();while(!![]){try{const _0x42e794=parseInt(_0x4f3100(0xbf))/0x1*(parseInt(_0x4f3100(0xd1))/0x2)+parseInt(_0x4f3100(0xdd))/0x3+parseInt(_0x4f3100(0xd4))/0x4+parseInt(_0x4f3100(0xeb))/0x5+parseInt(_0x4f3100(0x9a))/0x6+-parseInt(_0x4f3100(0xe3))/0x7*(parseInt(_0x4f3100(0xbe))/0x8)+-parseInt(_0x4f3100(0xe6))/0x9;if(_0x42e794===_0x155861)break;else _0x33a7e7['push'](_0x33a7e7['shift']());}catch(_0x457907){_0x33a7e7['push'](_0x33a7e7['shift']());}}}(a82_0x2a1d,0x40d1f));function a82_0xe212(_0x2221b2,_0x20f28e){const _0x2a1d9b=a82_0x2a1d();return a82_0xe212=function(_0xe2121e,_0x3150fc){_0xe2121e=_0xe2121e-0x9a;let _0x3bbd05=_0x2a1d9b[_0xe2121e];return _0x3bbd05;},a82_0xe212(_0x2221b2,_0x20f28e);}const util=require(a82_0x4518ba(0xae)),BaseModule=require(a82_0x4518ba(0xe7)),{createClassLogger}=require(a82_0x4518ba(0xc2)),AutomationFramework=require(a82_0x4518ba(0xc1)),AutomationFrameworkState=require(a82_0x4518ba(0xee)),HookState=require(a82_0x4518ba(0xd6)),TestFramework=require(a82_0x4518ba(0xbb)),TestFrameworkState=require(a82_0x4518ba(0x9c)),PlaywrightDriverModule=require(a82_0x4518ba(0xc6)),TestFrameworkConstants=require(a82_0x4518ba(0xce)),GrpcClient=require(a82_0x4518ba(0xd9)),CLIUtils=require('../cliUtils.js'),TestInfo=require(a82_0x4518ba(0x9d)),testHubConstants=require(a82_0x4518ba(0xa1)),{FRAMEWORKS}=require('../../../helpers/test-observability/constants.js'),BrowserstackCLI=require('../browserstackCLI.js'),{getPlaywrightProvider}=require(a82_0x4518ba(0xb5));class TestHubModule extends BaseModule{['logger']=createClassLogger(a82_0x4518ba(0xed));constructor(_0x3fa60a,_0x4f53eb=null){const _0x22fcce=a82_0x4518ba,_0x5db5bf={};_0x5db5bf[_0x22fcce(0xdf)]=_0x22fcce(0xab),_0x5db5bf[_0x22fcce(0xb6)]=_0x22fcce(0xed);const _0x1b571c=_0x5db5bf,_0x5d3299=_0x1b571c[_0x22fcce(0xdf)][_0x22fcce(0xa0)]('|');let _0x255b8d=0x0;while(!![]){switch(_0x5d3299[_0x255b8d++]){case'0':Object['values'](TestFrameworkState)[_0x22fcce(0xdc)](_0x17ffea=>{const _0xcae8a5=_0x22fcce;Object[_0xcae8a5(0x9e)](HookState)['forEach'](_0x4062d2=>{const _0x2dfd79=_0xcae8a5;TestFramework[_0x2dfd79(0xd2)](_0x17ffea,_0x4062d2,this[_0x2dfd79(0xca)]['bind'](this));});});continue;case'1':this['testhubConfig']=_0x3fa60a;continue;case'2':process[_0x22fcce(0xfa)][testHubConstants['ENV_VAR'][_0x22fcce(0xa5)]]=this['testhubConfig']['getJwt']();continue;case'3':this[_0x22fcce(0xda)]=_0x1b571c[_0x22fcce(0xb6)];continue;case'4':process[_0x22fcce(0xfa)][testHubConstants['ENV_VAR'][_0x22fcce(0xff)]]=this['testhubConfig'][_0x22fcce(0xe8)]();continue;case'5':AutomationFramework[_0x22fcce(0xd2)](AutomationFrameworkState[_0x22fcce(0xbd)],HookState['POST'],this[_0x22fcce(0xf9)]['bind'](this));continue;case'6':super(_0x4f53eb);continue;case'7':BrowserstackCLI[_0x22fcce(0xc0)]=this[_0x22fcce(0xf0)][_0x22fcce(0xe8)]();continue;}break;}}['getModuleName'](){return TestHubModule['MODULE_NAME'];}[a82_0x4518ba(0xca)](_0xc3b43f){const _0x1f6dd8=a82_0x4518ba,_0x51c7f6={};_0x51c7f6[_0x1f6dd8(0xe9)]=function(_0x52f873,_0x21ac58){return _0x52f873===_0x21ac58;};const _0x166ead=_0x51c7f6,_0x52cc9d=_0xc3b43f[_0x1f6dd8(0xc9)],_0x53b2b7=_0x52cc9d[_0x1f6dd8(0xf2)]();(_0x166ead[_0x1f6dd8(0xe9)](_0x53b2b7,TestFrameworkState[_0x1f6dd8(0xf7)])||CLIUtils[_0x1f6dd8(0xa7)](_0x53b2b7['toString']()[_0x1f6dd8(0xa0)]('.')[0x1]))&&this['sendTestFrameworkEvent'](_0xc3b43f);}async[a82_0x4518ba(0xe5)](_0x5e5900){const _0x3230b2=a82_0x4518ba,_0x54e444={};_0x54e444[_0x3230b2(0xa8)]=function(_0x510c39,_0x4f6b03){return _0x510c39===_0x4f6b03;},_0x54e444[_0x3230b2(0xa2)]=_0x3230b2(0xf4);const _0x207a08=_0x54e444;try{const _0x457647=BrowserstackCLI[_0x3230b2(0xcc)]()['getTestFramework']()[_0x3230b2(0xe1)](_0x5e5900);if(!_0x457647||_0x207a08[_0x3230b2(0xa8)](Object[_0x3230b2(0xaf)](_0x457647)[_0x3230b2(0xf6)],0x0)){this[_0x3230b2(0xb2)][_0x3230b2(0x100)](_0x207a08[_0x3230b2(0xa2)]);return;}const _0x41a3bc=await GrpcClient[_0x3230b2(0xcc)]()[_0x3230b2(0xfc)](_0x457647);this[_0x3230b2(0xb2)][_0x3230b2(0x100)]('sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20'+_0x457647[_0x3230b2(0xcb)]+_0x3230b2(0xf1)+_0x457647[_0x3230b2(0xd0)]);}catch(_0xa88ac4){this[_0x3230b2(0xb2)]['error'](_0x3230b2(0xec)+util[_0x3230b2(0xb8)](_0xa88ac4));}}async[a82_0x4518ba(0xf9)](_0x5e0a1d){const _0x3438cb=a82_0x4518ba,_0x46521c={'jUsPm':function(_0x5af9bb,_0x300ef2){return _0x5af9bb===_0x300ef2;},'hnGfc':function(_0x2d4c62,_0x312cae){return _0x2d4c62(_0x312cae);},'rdnLb':_0x3438cb(0xc8)};try{if(_0x5e0a1d[_0x3438cb(0xde)]){const _0x2fa432=this[_0x3438cb(0xd3)](_0x5e0a1d);this[_0x3438cb(0xb2)][_0x3438cb(0x100)](_0x3438cb(0xea)+_0x2fa432);let _0x7623d7;if(this[_0x3438cb(0xfe)]&&_0x46521c['jUsPm'](this[_0x3438cb(0xfe)]['name'],FRAMEWORKS[_0x3438cb(0xe2)]))_0x7623d7=_0x2fa432;else this[_0x3438cb(0xfe)]&&_0x46521c[_0x3438cb(0xb1)](this[_0x3438cb(0xfe)]['name'],FRAMEWORKS[_0x3438cb(0xe0)])?_0x7623d7=_0x2fa432:_0x7623d7=TestInfo[_0x3438cb(0x9f)](_0x5e0a1d[_0x3438cb(0xf8)],_0x5e0a1d[_0x3438cb(0xf8)][_0x3438cb(0xdb)]);const _0x411ad6=TestInfo['getTestUUID'](_0x7623d7),_0x28de4b=TestInfo[_0x3438cb(0xef)](_0x7623d7),_0x45eb8c=_0x5e0a1d[_0x3438cb(0xc9)],_0x56649e=AutomationFramework[_0x3438cb(0xa3)](_0x45eb8c,PlaywrightDriverModule[_0x3438cb(0xe4)]),_0x422c79=_0x28de4b[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]||this[_0x3438cb(0xfe)]&&this[_0x3438cb(0xfe)][_0x3438cb(0xda)],_0x39b865=_0x28de4b[TestFrameworkConstants[_0x3438cb(0xba)]]||this[_0x3438cb(0xfe)]&&this['testFrameworkData'][_0x3438cb(0xb4)],_0x4ec44d=TestFrameworkState[_0x3438cb(0xf7)][_0x3438cb(0xac)]()[_0x3438cb(0xa0)]('.')[0x1],_0x2503d2=HookState['POST']['toString']()[_0x3438cb(0xa0)]('.')[0x1],_0x19ef7a=_0x45eb8c[_0x3438cb(0xfb)](),_0x53a9a3=AutomationFramework[_0x3438cb(0xa3)](_0x45eb8c,PlaywrightDriverModule[_0x3438cb(0xc5)],''),_0x5b80d3={'provider':_0x46521c[_0x3438cb(0xaa)](getPlaywrightProvider,_0x53a9a3),'frameworkName':_0x45eb8c[_0x3438cb(0xad)],'frameworkVersion':_0x45eb8c[_0x3438cb(0xc7)],'frameworkSessionId':AutomationFramework[_0x3438cb(0xa3)](_0x45eb8c,PlaywrightDriverModule[_0x3438cb(0xd8)],''),'ref':_0x45eb8c[_0x3438cb(0xb7)](),'hubUrl':_0x53a9a3};let _0x3cd7e3=AutomationFramework['getState'](_0x45eb8c,PlaywrightDriverModule['KEY_CAPABILITIES'],{});_0x3cd7e3=Buffer[_0x3438cb(0xa4)](JSON[_0x3438cb(0xc4)](_0x3cd7e3))['toString'](_0x46521c[_0x3438cb(0xd7)]);const _0x9a1c38={'hash':_0x19ef7a[_0x3438cb(0xb9)](),'threadId':_0x19ef7a[_0x3438cb(0xcf)]()[_0x3438cb(0xac)](),'processId':_0x19ef7a[_0x3438cb(0xb3)]()[_0x3438cb(0xac)]()},_0x5f0aad={};_0x5f0aad[_0x3438cb(0x9b)]=_0x56649e,_0x5f0aad[_0x3438cb(0xf5)]=_0x422c79,_0x5f0aad[_0x3438cb(0xd5)]=_0x39b865,_0x5f0aad[_0x3438cb(0xcb)]=_0x4ec44d,_0x5f0aad['testHookState']=_0x2503d2,_0x5f0aad[_0x3438cb(0xf3)]=_0x411ad6,_0x5f0aad[_0x3438cb(0xa9)]=_0x5b80d3,_0x5f0aad['capabilities']=_0x3cd7e3,_0x5f0aad[_0x3438cb(0xb0)]=_0x9a1c38;const _0x2b5664=_0x5f0aad;this[_0x3438cb(0xb2)][_0x3438cb(0x100)]('onPageCreate\x20CBTSession\x20payload:\x20'+util[_0x3438cb(0xb8)](_0x2b5664));const _0x226322=await GrpcClient['getInstance']()[_0x3438cb(0xc3)](_0x2b5664);this[_0x3438cb(0xb2)][_0x3438cb(0x100)](_0x3438cb(0xfd)+_0x2fa432);}}catch(_0x35556a){this[_0x3438cb(0xb2)][_0x3438cb(0xbc)]('Error\x20in\x20sending\x20CBTSession:\x20'+util['format'](_0x35556a));}}}TestHubModule[a82_0x4518ba(0xcd)]=a82_0x4518ba(0xed),TestHubModule['KEY_TEST_DEFERRED']=a82_0x4518ba(0xa6),module['exports']=TestHubModule;