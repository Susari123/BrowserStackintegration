const a133_0x55496c=a133_0x34d5;function a133_0x25e9(){const _0xcb04e=['timeoutUrl','2654162eoyxWk','4625bBoAGj','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20timeout\x20URL','oWZEc','now','stack','[processSplitTestsResponse]\x20timeout:\x20','[getOrderedTestFiles]\x20Exception\x20in\x20fetching\x20ordered\x20test\x20files:\x20','timeoutInterval','hostname','defaultTimeoutInterval','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL:\x20','defaultTimeout','IWhdT','bbPBR','exports','[processSplitTestsResponse]\x20Processing\x20response:\x20','totalmem','Tjfuy','release','BROWSERSTACK_BUILD_RUN_IDENTIFIER','46OarkQq','buildName','platform','BQcxV','processSplitTestsResponse','../logger','99008ceDTNJ','splitTestsAPICallCount','stringify','debug','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL\x20after\x20waiting\x20for\x20','arch',',\x20timeoutUrl:\x20','getSplitFiles','body','[splitTests]\x20Response\x20from\x20split\x20tests\x20API:\x20','\x20seconds.','1324316YcUkCG','nzeVH','KKAUI','map','length','timeout','_getHostInfo','config','iWusA','tests','winstonLogger',',\x20timeoutInterval:\x20','310675CHoHiA','RlmbB','env','3294umXxcq','[getOrderedTestFiles]\x20Response\x20from\x20result\x20URL:\x20','[splitTests]\x20Exception\x20in\x20sending\x20test\x20files:\x20','tAmXT','[getOrderedTestFiles]\x20Fetching\x20ordered\x20test\x20files','2696391fNLyvB','filePath','resultUrl','BROWSERSTACK_NODE_INDEX','toString','EzDrm','50577odmBZM','projectName'];a133_0x25e9=function(){return _0xcb04e;};return a133_0x25e9();}(function(_0x5f1345,_0x5bae4a){const _0x4e7a88=a133_0x34d5,_0x402a1b=_0x5f1345();while(!![]){try{const _0x2f3b4d=parseInt(_0x4e7a88(0x11b))/0x1+-parseInt(_0x4e7a88(0x141))/0x2*(parseInt(_0x4e7a88(0x129))/0x3)+parseInt(_0x4e7a88(0x10f))/0x4+-parseInt(_0x4e7a88(0x12d))/0x5*(parseInt(_0x4e7a88(0x11e))/0x6)+parseInt(_0x4e7a88(0x12c))/0x7+-parseInt(_0x4e7a88(0x147))/0x8+parseInt(_0x4e7a88(0x123))/0x9;if(_0x2f3b4d===_0x5bae4a)break;else _0x402a1b['push'](_0x402a1b['shift']());}catch(_0x4a7d8){_0x402a1b['push'](_0x402a1b['shift']());}}}(a133_0x25e9,0x64b91));function a133_0x34d5(_0x4b6786,_0x53670b){const _0x25e98e=a133_0x25e9();return a133_0x34d5=function(_0x34d5de,_0x378c8b){_0x34d5de=_0x34d5de-0x10c;let _0x2dfb69=_0x25e98e[_0x34d5de];return _0x2dfb69;},a133_0x34d5(_0x4b6786,_0x53670b);}const logger=require(a133_0x55496c(0x146))[a133_0x55496c(0x119)],RequestUtils=require('./requestUtils');class TestOrderingServerHandler{constructor(_0x4306dc){const _0xd4bf3c=a133_0x55496c;this[_0xd4bf3c(0x116)]=_0x4306dc,this[_0xd4bf3c(0x148)]=0x0,this[_0xd4bf3c(0x138)]=0x3c,this['defaultTimeoutInterval']=0x5;}['getSplitTestsAPICallCount'](){return this['splitTestsAPICallCount'];}[a133_0x55496c(0x145)](_0x477614){const _0x3d7618=a133_0x55496c,_0x15d9ca={};_0x15d9ca['tAmXT']='[processSplitTestsResponse]\x20Received\x20null\x20value(s)\x20for\x20some\x20attributes\x20in\x20split\x20tests\x20API\x20response';const _0x1712b7=_0x15d9ca;if(!_0x477614)return null;const _0x123ef7={};return _0x123ef7[_0x3d7618(0x114)]=_0x477614[_0x3d7618(0x114)]||this['defaultTimeout'],_0x123ef7[_0x3d7618(0x134)]=_0x477614[_0x3d7618(0x134)]||this['defaultTimeoutInterval'],_0x123ef7['resultUrl']=_0x477614[_0x3d7618(0x125)],_0x123ef7[_0x3d7618(0x12b)]=_0x477614[_0x3d7618(0x12b)],logger['debug'](_0x3d7618(0x13c)+JSON[_0x3d7618(0x149)](_0x477614)),logger[_0x3d7618(0x14a)](_0x3d7618(0x132)+_0x477614[_0x3d7618(0x114)]+_0x3d7618(0x11a)+_0x477614[_0x3d7618(0x134)]+',\x20resultUrl:\x20'+_0x477614[_0x3d7618(0x125)]+_0x3d7618(0x14d)+_0x477614[_0x3d7618(0x12b)]),(!_0x477614[_0x3d7618(0x114)]||!_0x477614[_0x3d7618(0x134)]||!_0x477614[_0x3d7618(0x12b)]||!_0x477614['resultUrl'])&&logger['debug'](_0x1712b7[_0x3d7618(0x121)]),_0x123ef7;}async['splitTests'](_0x4e2e15,_0x1b3039){const _0x39cdf8=a133_0x55496c,_0x1b7459={'Tjfuy':function(_0x35da10,_0xb63bed){return _0x35da10(_0xb63bed);},'nzeVH':function(_0x184c53,_0x3eb10c){return _0x184c53(_0x3eb10c);}};try{const _0x5e4b7b=_0x1b7459[_0x39cdf8(0x13e)](parseInt,process[_0x39cdf8(0x11d)][_0x39cdf8(0x126)]||'0'),_0x2de1fd=_0x1b7459[_0x39cdf8(0x110)](parseInt,process[_0x39cdf8(0x11d)]['BROWSERSTACK_TOTAL_NODE_COUNT']||'1'),_0xa427a3=process[_0x39cdf8(0x11d)][_0x39cdf8(0x140)],_0x3c2fc1={'nodeIndex':_0x5e4b7b,'totalNodes':_0x2de1fd,'projectName':this[_0x39cdf8(0x116)][_0x39cdf8(0x12a)],'buildName':this[_0x39cdf8(0x116)][_0x39cdf8(0x142)],'buildRunIdentifier':_0xa427a3,'orchestrationStrategy':_0x1b3039,'hostInfo':this[_0x39cdf8(0x115)](),'tests':_0x4e2e15[_0x39cdf8(0x112)](_0x7f9ae8=>({'filePath':_0x7f9ae8}))},_0x388626=await RequestUtils['postSplitFiles'](_0x3c2fc1);return logger['debug'](_0x39cdf8(0x10d)+JSON[_0x39cdf8(0x149)](_0x388626)),this[_0x39cdf8(0x148)]+=0x1,this[_0x39cdf8(0x145)](_0x388626[_0x39cdf8(0x10c)]||{});}catch(_0x128af1){return logger[_0x39cdf8(0x14a)](_0x39cdf8(0x120)+(_0x128af1[_0x39cdf8(0x131)]||_0x128af1['toString']())),null;}}async['getOrderedTestFiles'](_0x2cb0b9){const _0x6cd7a5=a133_0x55496c,_0x280921={};_0x280921[_0x6cd7a5(0x13a)]=_0x6cd7a5(0x122),_0x280921[_0x6cd7a5(0x111)]=function(_0x23bdb9,_0x28e4ff){return _0x23bdb9*_0x28e4ff;},_0x280921[_0x6cd7a5(0x144)]=function(_0x82853,_0x54a47){return _0x82853&&_0x54a47;},_0x280921[_0x6cd7a5(0x12f)]=function(_0x23abcc,_0x572ccf){return _0x23abcc<_0x572ccf;},_0x280921[_0x6cd7a5(0x128)]=function(_0x52809c,_0xd02d99){return _0x52809c-_0xd02d99;},_0x280921[_0x6cd7a5(0x11c)]=_0x6cd7a5(0x12e),_0x280921[_0x6cd7a5(0x139)]=function(_0x540af5,_0x981126){return _0x540af5>_0x981126;};const _0x46e6da=_0x280921;if(!_0x2cb0b9)return null;try{logger[_0x6cd7a5(0x14a)](_0x46e6da[_0x6cd7a5(0x13a)]);const _0x46330a=_0x2cb0b9[_0x6cd7a5(0x134)]||this[_0x6cd7a5(0x136)],_0x2d15ea=_0x46e6da[_0x6cd7a5(0x111)](_0x2cb0b9[_0x6cd7a5(0x114)]||this[_0x6cd7a5(0x138)],0x3e8),_0x1b0a25=_0x2cb0b9[_0x6cd7a5(0x12b)],_0x551b03=_0x2cb0b9[_0x6cd7a5(0x125)];if(_0x46e6da[_0x6cd7a5(0x144)](!_0x551b03,!_0x1b0a25))return null;let _0x47c10f=null;const _0x3f2942=Date['now']();while(_0x551b03&&_0x46e6da['oWZEc'](_0x46e6da[_0x6cd7a5(0x128)](Date[_0x6cd7a5(0x130)](),_0x3f2942),_0x2d15ea)){logger[_0x6cd7a5(0x14a)](_0x6cd7a5(0x137)+_0x551b03);const _0x3a7c61=await RequestUtils[_0x6cd7a5(0x14e)](_0x551b03);logger[_0x6cd7a5(0x14a)](_0x6cd7a5(0x11f)+JSON[_0x6cd7a5(0x149)](_0x3a7c61)),this['splitTestsAPICallCount']+=0x1;if(_0x3a7c61&&_0x3a7c61[_0x6cd7a5(0x118)]){_0x47c10f=_0x3a7c61[_0x6cd7a5(0x118)];break;}await new Promise(_0x2a697d=>setTimeout(_0x2a697d,_0x46330a*0x3e8)),logger['debug'](_0x6cd7a5(0x14b)+_0x46330a+_0x6cd7a5(0x10e));}if(_0x46e6da[_0x6cd7a5(0x144)](!_0x47c10f,_0x1b0a25)){logger[_0x6cd7a5(0x14a)](_0x46e6da[_0x6cd7a5(0x11c)]);const _0x5a002f=await RequestUtils[_0x6cd7a5(0x14e)](_0x1b0a25);_0x5a002f&&_0x5a002f[_0x6cd7a5(0x118)]&&(_0x47c10f=_0x5a002f['tests']);}if(_0x47c10f&&_0x46e6da[_0x6cd7a5(0x139)](_0x47c10f[_0x6cd7a5(0x113)],0x0))return _0x47c10f[_0x6cd7a5(0x112)](_0x5e71bb=>_0x5e71bb[_0x6cd7a5(0x124)]);return null;}catch(_0x509aca){return logger[_0x6cd7a5(0x14a)](_0x6cd7a5(0x133)+(_0x509aca['stack']||_0x509aca[_0x6cd7a5(0x127)]())),null;}}[a133_0x55496c(0x115)](){const _0x4d3858=a133_0x55496c,_0x43a66f={'iWusA':function(_0x52d039,_0x457c34){return _0x52d039(_0x457c34);}},_0xf7888d=_0x43a66f[_0x4d3858(0x117)](require,'os');try{return{'hostname':_0xf7888d[_0x4d3858(0x135)](),'platform':_0xf7888d[_0x4d3858(0x143)](),'release':_0xf7888d[_0x4d3858(0x13f)](),'arch':_0xf7888d[_0x4d3858(0x14c)](),'totalmem':_0xf7888d[_0x4d3858(0x13d)](),'freemem':_0xf7888d['freemem']()};}catch(_0x14f72b){return{};}}}module[a133_0x55496c(0x13b)]=TestOrderingServerHandler;