const a129_0x2ae056=a129_0x41eb;function a129_0x58f6(){const _0x2c36b3=['exports','../logger','1869048vuxAZl','kcyOz','uniqueFailedTests','parse',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','totalTests','oWVXb','openSync','FailFastFileHelper','utf8','releaseLock',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','error','1218483OhHFrW','UrzYk',']\x20Error\x20creating\x20state\x20file:\x20','zuZKX','lastAPIFailedCount','lockFilePath','failedTests','0|4|3|1|2','warn','readState','message','QgUJQ','failFastConfig','from','readFileSync','code','winstonLogger','existsSync','10aHolNy','3262392tFQWWX','fullName','DjnyF','writeFileSync','5suKcGE','closeSync','1968852DeEnzu','acquireLock','27162sQaYhP','660592LBjUjP','stateFilePath','jmRqa','stringify','status','3675133SMMWlu',']\x20Error\x20reading\x20state\x20file:\x20','defaultState','56zXDvbS','writeState','bJFFX','stack','18QVLsRd','newState','DMHfk','has'];a129_0x58f6=function(){return _0x2c36b3;};return a129_0x58f6();}(function(_0x1ead36,_0x4a68d5){const _0x6157b0=a129_0x41eb,_0x483e91=_0x1ead36();while(!![]){try{const _0x44e1e7=-parseInt(_0x6157b0(0x1b3))/0x1*(parseInt(_0x6157b0(0x1c0))/0x2)+parseInt(_0x6157b0(0x198))/0x3+parseInt(_0x6157b0(0x1c6))/0x4+parseInt(_0x6157b0(0x1af))/0x5*(-parseInt(_0x6157b0(0x1b1))/0x6)+-parseInt(_0x6157b0(0x1bc))/0x7*(parseInt(_0x6157b0(0x1b4))/0x8)+parseInt(_0x6157b0(0x1ab))/0x9*(parseInt(_0x6157b0(0x1aa))/0xa)+parseInt(_0x6157b0(0x1b9))/0xb;if(_0x44e1e7===_0x4a68d5)break;else _0x483e91['push'](_0x483e91['shift']());}catch(_0x4439bd){_0x483e91['push'](_0x483e91['shift']());}}}(a129_0x58f6,0x523b6));const fs=require('fs'),logger=require(a129_0x2ae056(0x1c5))[a129_0x2ae056(0x1a8)],TAG=a129_0x2ae056(0x193);class FileHelper{constructor(_0x234364,_0x9cd1a2,_0x51a1e6,_0x3f7b8e){const _0x2b62fd=a129_0x2ae056,_0x55d98f={};_0x55d98f['oWVXb']=_0x2b62fd(0x19f),_0x55d98f[_0x2b62fd(0x1be)]=_0x2b62fd(0x194);const _0x23f8bb=_0x55d98f,_0x1ab125=_0x23f8bb[_0x2b62fd(0x191)]['split']('|');let _0x14a74e=0x0;while(!![]){switch(_0x1ab125[_0x14a74e++]){case'0':this[_0x2b62fd(0x1a4)]=_0x234364;continue;case'1':this[_0x2b62fd(0x1bb)]=_0x3f7b8e;continue;case'2':if(!fs[_0x2b62fd(0x1a9)](this[_0x2b62fd(0x1b5)]))try{fs[_0x2b62fd(0x1ae)](this[_0x2b62fd(0x1b5)],'{}',_0x23f8bb[_0x2b62fd(0x1be)]);}catch(_0x167475){logger[_0x2b62fd(0x197)]('['+TAG+_0x2b62fd(0x19a)+_0x167475[_0x2b62fd(0x1a2)]+'\x20'+_0x167475[_0x2b62fd(0x1bf)]);}continue;case'3':this[_0x2b62fd(0x19d)]=_0x51a1e6;continue;case'4':this[_0x2b62fd(0x1b5)]=_0x9cd1a2;continue;}break;}}async[a129_0x2ae056(0x1b2)](){const _0xba1006=a129_0x2ae056,_0x1b1246={};_0x1b1246[_0xba1006(0x1c7)]=function(_0x3897c2,_0x425d23){return _0x3897c2===_0x425d23;},_0x1b1246['QgUJQ']='EEXIST';const _0x3c4faa=_0x1b1246;let _0x1ddff5;try{return _0x1ddff5=fs[_0xba1006(0x192)](this[_0xba1006(0x19d)],'wx'),_0x1ddff5;}catch(_0x4c83fb){if(_0x3c4faa[_0xba1006(0x1c7)](_0x4c83fb[_0xba1006(0x1a7)],_0x3c4faa[_0xba1006(0x1a3)]))return null;throw _0x4c83fb;}}async[a129_0x2ae056(0x195)](_0x509a09){const _0x3c3517=a129_0x2ae056;if(_0x509a09)try{fs[_0x3c3517(0x1b0)](_0x509a09),fs['unlinkSync'](this[_0x3c3517(0x19d)]);}catch(_0x136e17){logger['error']('['+TAG+']\x20Error\x20releasing\x20lock:\x20'+_0x136e17[_0x3c3517(0x1a2)]+'\x20'+_0x136e17[_0x3c3517(0x1bf)]);}}[a129_0x2ae056(0x1a1)](){const _0x1bb1cb=a129_0x2ae056,_0x37ef16={};_0x37ef16[_0x1bb1cb(0x19b)]=_0x1bb1cb(0x194);const _0x30c084=_0x37ef16;try{const _0x3b826e=fs[_0x1bb1cb(0x1a6)](this[_0x1bb1cb(0x1b5)],_0x30c084['zuZKX']);return JSON[_0x1bb1cb(0x18e)](_0x3b826e);}catch(_0x499b5a){return logger[_0x1bb1cb(0x197)]('['+TAG+_0x1bb1cb(0x1ba)+_0x499b5a['message']+'\x20'+_0x499b5a[_0x1bb1cb(0x1bf)]),null;}}async[a129_0x2ae056(0x1bd)](_0x3ce2e3){const _0x40e422=a129_0x2ae056,_0x27983c={..._0x3ce2e3,'uniqueFailedTests':Array['isArray'](_0x3ce2e3[_0x40e422(0x18d)])?_0x3ce2e3[_0x40e422(0x18d)]:Array[_0x40e422(0x1a5)](_0x3ce2e3[_0x40e422(0x18d)]||[])};try{fs['writeFileSync'](this[_0x40e422(0x1b5)],JSON[_0x40e422(0x1b7)](_0x27983c,null,0x2));}catch(_0x29be7e){logger[_0x40e422(0x197)]('['+TAG+']\x20Error\x20writing\x20state\x20file:\x20'+_0x29be7e['message']+'\x20'+_0x29be7e[_0x40e422(0x1bf)]);throw _0x29be7e;}}async['recordTestResult'](_0x37df3c,_0x2c87e5){const _0x40a026=a129_0x2ae056,_0x51c50f={};_0x51c50f[_0x40a026(0x1b6)]=function(_0x1f98f8,_0x4143f1){return _0x1f98f8!==_0x4143f1;},_0x51c50f[_0x40a026(0x1ad)]='function',_0x51c50f[_0x40a026(0x199)]=function(_0xb98ad7,_0x6669e9){return _0xb98ad7===_0x6669e9;},_0x51c50f[_0x40a026(0x1c2)]='failed';const _0x2a1af6=_0x51c50f,_0x33bfe9=await this[_0x40a026(0x1b2)]();if(!_0x33bfe9)return logger[_0x40a026(0x1a0)]('['+TAG+_0x40a026(0x196)),{'newState':this['readState']()||this[_0x40a026(0x1bb)],'isNewFailure':![]};try{let _0x2dc8bb=this['readState']();!_0x2dc8bb&&(_0x2dc8bb=JSON[_0x40a026(0x18e)](JSON['stringify'](this[_0x40a026(0x1bb)])));if(!_0x2dc8bb[_0x40a026(0x18d)]||_0x2a1af6['jmRqa'](typeof _0x2dc8bb['uniqueFailedTests'][Symbol['iterator']],_0x2a1af6[_0x40a026(0x1ad)]))_0x2dc8bb[_0x40a026(0x18d)]=new Set();else Array['isArray'](_0x2dc8bb[_0x40a026(0x18d)])&&(_0x2dc8bb[_0x40a026(0x18d)]=new Set(_0x2dc8bb[_0x40a026(0x18d)]));_0x2dc8bb[_0x40a026(0x190)]=_0x2c87e5;let _0x58ed36=![];_0x2a1af6[_0x40a026(0x199)](_0x37df3c[_0x40a026(0x1b8)],_0x2a1af6[_0x40a026(0x1c2)])&&(_0x2dc8bb[_0x40a026(0x19e)]+=0x1,!_0x2dc8bb[_0x40a026(0x18d)][_0x40a026(0x1c3)](_0x37df3c[_0x40a026(0x1ac)])&&(_0x2dc8bb['uniqueFailedTests']['add'](_0x37df3c[_0x40a026(0x1ac)]),_0x58ed36=!![]));await this[_0x40a026(0x1bd)](_0x2dc8bb);const _0xfbe581={};return _0xfbe581[_0x40a026(0x1c1)]=_0x2dc8bb,_0xfbe581['isNewFailure']=_0x58ed36,_0xfbe581;}finally{await this[_0x40a026(0x195)](_0x33bfe9);}}async['updateAPIFailedCount'](_0x2fdf45){const _0x2eac59=a129_0x2ae056,_0x4eaf98=await this['acquireLock']();if(!_0x4eaf98)return logger['warn']('['+TAG+_0x2eac59(0x18f)),this[_0x2eac59(0x1a1)]()||this[_0x2eac59(0x1bb)];try{let _0x489cea=this[_0x2eac59(0x1a1)]();return!_0x489cea&&(_0x489cea=JSON['parse'](JSON[_0x2eac59(0x1b7)](this[_0x2eac59(0x1bb)]))),_0x489cea[_0x2eac59(0x19c)]=_0x2fdf45,await this['writeState'](_0x489cea),_0x489cea;}finally{await this[_0x2eac59(0x195)](_0x4eaf98);}}}function a129_0x41eb(_0x32abf1,_0x33cc19){const _0x58f612=a129_0x58f6();return a129_0x41eb=function(_0x41ebe7,_0x4f3bd1){_0x41ebe7=_0x41ebe7-0x18d;let _0x4b6808=_0x58f612[_0x41ebe7];return _0x4b6808;},a129_0x41eb(_0x32abf1,_0x33cc19);}module[a129_0x2ae056(0x1c4)]=FileHelper;