const a90_0x577bb2=a90_0x541d;(function(_0x487f7f,_0x14daee){const _0x1ebb50=a90_0x541d,_0x49be50=_0x487f7f();while(!![]){try{const _0x1b70b6=parseInt(_0x1ebb50(0x1f6))/0x1+parseInt(_0x1ebb50(0x1f7))/0x2*(-parseInt(_0x1ebb50(0x1f4))/0x3)+parseInt(_0x1ebb50(0x27e))/0x4*(parseInt(_0x1ebb50(0x22b))/0x5)+-parseInt(_0x1ebb50(0x2a3))/0x6*(-parseInt(_0x1ebb50(0x1dc))/0x7)+-parseInt(_0x1ebb50(0x266))/0x8+-parseInt(_0x1ebb50(0x1cb))/0x9+parseInt(_0x1ebb50(0x200))/0xa;if(_0x1b70b6===_0x14daee)break;else _0x49be50['push'](_0x49be50['shift']());}catch(_0xca2afe){_0x49be50['push'](_0x49be50['shift']());}}}(a90_0x4a6b,0x52931));const util=require(a90_0x577bb2(0x1ec)),os=require('os'),path=require(a90_0x577bb2(0x26b)),{v4:uuidv4}=require(a90_0x577bb2(0x1b0)),fs=require('fs'),constants=require(a90_0x577bb2(0x1e0)),logger=require(a90_0x577bb2(0x25f))[a90_0x577bb2(0x1d0)],fileLogger=require(a90_0x577bb2(0x25f))[a90_0x577bb2(0x1f9)],{getLogDir}=require(a90_0x577bb2(0x25f)),helper=require(a90_0x577bb2(0x2a4)),utilities=require(a90_0x577bb2(0x210)),percyHelper=require(a90_0x577bb2(0x1cc)),hubAllocator=require(a90_0x577bb2(0x1cf)),PerformanceTester=require('./performance/performance-tester'),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a90_0x577bb2(0x1da)),{setPercyFlag}=require(a90_0x577bb2(0x261)),TestHubHandler=require(a90_0x577bb2(0x29b)),timeoutPromise=require(a90_0x577bb2(0x23a)),BrowserstackCLI=require('../bin/v2/browserstackCLI'),{getEdsInstrumentationAPIUrl}=require(a90_0x577bb2(0x23e));function a90_0x541d(_0x252fd1,_0x29a4b5){const _0x4a6ba4=a90_0x4a6b();return a90_0x541d=function(_0x541d70,_0x1a9edb){_0x541d70=_0x541d70-0x1a1;let _0x4d6513=_0x4a6ba4[_0x541d70];return _0x4d6513;},a90_0x541d(_0x252fd1,_0x29a4b5);}function a90_0x4a6b(){const _0x23afc8=['215xrZlck','Data\x20sent\x20successfully\x20to\x20','CNUdN','frhwo','finalize','captureError','LbJWb','forceLocal','getLocalIdentifier','generateLocalIdentifier','DzZLy','NSiWH','thUoB','platforms','setupKeepAlive','./timeoutPromise','warn','Iaqmv','vnWUt','../bin/utils/apiUtilityMethods','SIGINT','ODXSB','percy','bIHLF','cRmgS','cancel','beforeExit','brPpO','skipBinaryInitialisation','SpMHS','isTrue','xjXMI','selenium-webdriver','Percy\x20stopped','Sfagv','startMonitoring','proxyConfig','length','skipSessionName','skipSessionStatus','zRkLj','isEnabled','setCLICaps','OzrDV','intExitHandler','hubUrl','turboScaleGridDetails','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','TCG_AUTH_FAILURE','cZnZe','BrowserstackHealing.init\x20method\x20timed\x20out','BrowserstackHealingInitFailed','./logger','setupPercy','./testhub/utils','getPackageVersion','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','testContextOptions','PIJjc','4821368xYKSfb','turboScaleUrl','yokZt','Error\x20in\x20percy\x20setup\x20','Aluli','path','stop','browserstackLocal','vPouZ','cpRjg','exceptions','requireSeleniumWebdriverCheck','Calling\x20Build\x20Stop\x20from\x20ExitHandler','getInstance','glMbJ','measureWrapper','zlnim','getUserName','envConfig','events.json','HUB_MANAGEMENT','isUndefined','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','Error\x20in\x20writing\x20events\x20to\x20file\x20','28624AAfzrP','getLocalConfig','HOHTn','getAccessKey','getTurboScaleGridDetails','framework','isHealingEnabled','zXqsh','INVALID_INIT_RESP_WITH_USER_IMPACT','exitHandler','isRunning','Kwvhe','integrations','normalizeTestReportingEnvVars','initialize','localIdentifier','iMqFc','fZYJk','platform','AZBZQ','disableAutoCaptureLogs','stringify','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','Local\x20binary\x20started\x20successfully','BrowserstackHealing.init','ujJJD','setBrowserstackInfraFromConfig','userName\x20or\x20accessKey\x20is\x20not\x20defined','AUTOLOGCAPTURE_NOTIFICATION','./testhub/testhubHandler','uncaughtException','config','preInitialize','SDK_CLEANUP','grXrU','isAuthenticated','CWXMS','24894ZyHHPz','./helper','central_scanner','AI_PROXY_FAILURE','TCG_AUTH_TIMEOUT','Local\x20binary\x20stopped','userName','cEwwy','STomn','gQzSn','pzTmC','sendToEDS','codeceptjs','SIGHUP','allocateHub','isBrowserstackInfra','setHandlePWError','./setKeepAlive','end','getFinalCaps','uuid','sanitizeCaps','startPercy','handleExceptions','czcME','message','accessKey','SIGQUIT','turboScale','info','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','VDnDf','fZxAR','getHubUrl','\x20with\x20response\x20','split','QLPxR','setProxySettings','UuGvD','TCG_URL','toLowerCase','SDK\x20run\x20started\x20with\x20id:\x20','fireFunnelTestEvent','ljDAN','unhandledErrors','Error\x20occured\x20while\x20stopping\x20percy','../../package.json','4599810NEzBPF','./percy/utils','tfygV','Shutdown\x20triggered\x20by\x20','../hubAllocationMethods','winstonLogger','cliConfig','browserStackLocalOptions','TllPo','sdkRunId','qFJbk','vKkgB','handled','constructor','setupTcgConfigFile','./performance/constants','version','861tBupZA','bFVoI','setCredentialsFromYmlConfig','aOfTs','../bin/utils/constants','playwright','true','status','SIGTERM','startLocalBinary','ITdJn','custom-repeater','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','aBHoK','bind','bnknu','util','win32','FRAMEWORK','?caps=','setEnvCaps','turboScaleOptions','xvMlF','uIaLv','3ubEchp','yzzMS','41320HOKOQu','257138KxnTuk','ZyMEj','fileLogger','selfHeal','setUpHubUrl','xBfBp','toString','CslDO','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','7212000TtThLd','stopBrowserstackLocal','proxyUrl','format','killSignal','RMKxh','assign','stopPercy','stopLocalBinary','includes','aiHeal:tcgAuth','env','qFJUO','CEcow','NtKlh','BROWSERSTACK_TURBOSCALE','./utilities','No\x20config\x20provided.','qaqno','BROWSERSTACK_PERCY','AkuRM','Failed\x20to\x20send\x20data\x20to\x20','getConfigPath','\x20with\x20error\x20','isTurboScaleSession','writeFileSync','setLogDir','localOptions','isTrialGrid','fRYJX','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','checkStopLocalBinaryOnExit','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','getProxyConfigForTcg','debug','init','error','join','../ai-sdk-node/bundle','default','proxy','close','OnanE'];a90_0x4a6b=function(){return _0x23afc8;};return a90_0x4a6b();}class BrowserStackSetup{constructor(_0x5ab586,_0x5c7e27){const _0x30b818=a90_0x577bb2,_0x2f0989={'AZBZQ':'0|8|7|3|10|6|22|16|5|1|9|4|13|19|12|17|20|2|21|18|11|14|15','fRYJX':function(_0x2a27a8){return _0x2a27a8();},'uIaLv':_0x30b818(0x211)},_0xdd3bde=_0x2f0989[_0x30b818(0x291)][_0x30b818(0x1bf)]('|');let _0x46fa59=0x0;while(!![]){switch(_0xdd3bde[_0x46fa59++]){case'0':this[_0x30b818(0x1c8)]=[];continue;case'1':this['errorMessage']={};continue;case'2':this[_0x30b818(0x29d)][_0x30b818(0x264)][_0x30b818(0x252)]=!helper[_0x30b818(0x1ab)]()||helper[_0x30b818(0x249)](this[_0x30b818(0x29d)][_0x30b818(0x264)][_0x30b818(0x252)]);continue;case'3':this[_0x30b818(0x26d)]=null;continue;case'4':this[_0x30b818(0x283)]=_0x5c7e27;continue;case'5':this['config'][_0x30b818(0x264)]=this[_0x30b818(0x29d)]['testContextOptions']||{};continue;case'6':this[_0x30b818(0x29d)]=helper['readConfig'](helper[_0x30b818(0x216)](_0x5ab586));continue;case'7':this[_0x30b818(0x278)]=helper[_0x30b818(0x1f0)]();continue;case'8':helper[_0x30b818(0x28b)]();continue;case'9':this[_0x30b818(0x1d4)]=_0x2f0989[_0x30b818(0x21d)](uuidv4);continue;case'10':this[_0x30b818(0x241)]=null;continue;case'11':helper[_0x30b818(0x21a)](this[_0x30b818(0x29d)]);continue;case'12':if(this[_0x30b818(0x29d)]['error'])throw new Error(this['config'][_0x30b818(0x224)]);continue;case'13':global[_0x30b818(0x283)]=_0x5c7e27;continue;case'14':helper['setLogLevel'](this[_0x30b818(0x29d)],this[_0x30b818(0x1d1)],this['envConfig']);continue;case'15':PerformanceTester[_0x30b818(0x24e)]();continue;case'16':this[_0x30b818(0x29d)]['platforms']=this[_0x30b818(0x29d)]['platforms']||[];continue;case'17':helper[_0x30b818(0x298)](this[_0x30b818(0x29d)],this['cliConfig']);continue;case'18':helper[_0x30b818(0x1af)](this[_0x30b818(0x29d)],this[_0x30b818(0x1d1)],this[_0x30b818(0x278)]);continue;case'19':if(helper['isUndefined'](this['config']))throw new Error(_0x2f0989[_0x30b818(0x1f3)]);continue;case'20':helper[_0x30b818(0x1de)](this['config']);continue;case'21':this['config']['testContextOptions'][_0x30b818(0x251)]=!helper[_0x30b818(0x1ab)]()||helper['isTrue'](this[_0x30b818(0x29d)][_0x30b818(0x264)]['skipSessionName']);continue;case'22':this['cliConfig']=helper[_0x30b818(0x255)](_0x5ab586);continue;}break;}}[a90_0x577bb2(0x29e)](_0x2162fb){const _0x3b1a70=a90_0x577bb2,_0x1c5ea6={'ZyMEj':_0x3b1a70(0x299),'brPpO':function(_0x4d6b93,_0x136dd0){return _0x4d6b93===_0x136dd0;},'pzTmC':_0x3b1a70(0x28a),'vPouZ':'SDKTestAttempted','ITdJn':function(_0x2530a0,_0x12edba){return _0x2530a0<_0x12edba;},'dBDhN':function(_0x516057,_0x101f26){return _0x516057(_0x101f26);},'xvMlF':_0x3b1a70(0x24b),'zRkLj':'4.5.0','cdBaq':_0x3b1a70(0x263),'DzZLy':_0x3b1a70(0x25a),'Sfagv':_0x3b1a70(0x1e4),'ibCGb':_0x3b1a70(0x23f),'NtKlh':_0x3b1a70(0x1a9),'CWXMS':function(_0x2415a5,_0x5bb673){return _0x2415a5!==_0x5bb673;},'gstCq':_0x3b1a70(0x1ed),'vKkgB':'SIGABRT','ujJJD':_0x3b1a70(0x1b7),'ljDAN':'SIGBREAK','zXqsh':'beforeExit'},_0x23237a=this['framework'];global[_0x3b1a70(0x29d)]=this[_0x3b1a70(0x29d)],helper[_0x3b1a70(0x1b1)](this['config']),this[_0x3b1a70(0x204)]=null,global[_0x3b1a70(0x1d4)]=this[_0x3b1a70(0x1d4)],logger[_0x3b1a70(0x1b9)](_0x3b1a70(0x1c5)+this[_0x3b1a70(0x1d4)]),!this[_0x3b1a70(0x29d)][_0x3b1a70(0x1d2)]&&(this[_0x3b1a70(0x29d)][_0x3b1a70(0x1d2)]=this[_0x3b1a70(0x29d)][_0x3b1a70(0x21b)]||{});if(helper[_0x3b1a70(0x27b)](helper[_0x3b1a70(0x277)](this[_0x3b1a70(0x29d)]))||helper[_0x3b1a70(0x27b)](helper[_0x3b1a70(0x281)](this[_0x3b1a70(0x29d)])))throw new Error(_0x1c5ea6[_0x3b1a70(0x1f8)]);helper[_0x3b1a70(0x27f)](this[_0x3b1a70(0x29d)])&&helper[_0x3b1a70(0x27b)](helper[_0x3b1a70(0x233)](this[_0x3b1a70(0x29d)]))&&(!helper[_0x3b1a70(0x27b)](this[_0x3b1a70(0x29d)]['browserStackLocalOptions'])&&_0x1c5ea6[_0x3b1a70(0x246)](this[_0x3b1a70(0x29d)][_0x3b1a70(0x1d2)][_0x3b1a70(0x1d8)],Object)?!helper[_0x3b1a70(0x249)](this[_0x3b1a70(0x29d)][_0x3b1a70(0x1d2)][_0x3b1a70(0x247)])&&(this[_0x3b1a70(0x29d)][_0x3b1a70(0x1d2)][_0x3b1a70(0x28d)]=helper[_0x3b1a70(0x234)]()):this[_0x3b1a70(0x29d)]['browserStackLocalOptions']={'localIdentifier':helper['generateLocalIdentifier']()});this[_0x3b1a70(0x29d)]['browserStackLocalOptions'][_0x3b1a70(0x247)]=helper[_0x3b1a70(0x249)](this[_0x3b1a70(0x29d)][_0x3b1a70(0x1d2)][_0x3b1a70(0x247)]),helper[_0x3b1a70(0x1ac)](this['config']);if(_0x1c5ea6[_0x3b1a70(0x246)](_0x23237a,_0x1c5ea6[_0x3b1a70(0x1a6)]))return;this[_0x3b1a70(0x1b3)]();process[_0x3b1a70(0x20b)][_0x3b1a70(0x20f)]&&(this[_0x3b1a70(0x29d)][_0x3b1a70(0x1b8)]=helper[_0x3b1a70(0x249)](process[_0x3b1a70(0x20b)][_0x3b1a70(0x20f)]),this[_0x3b1a70(0x29d)][_0x3b1a70(0x1f1)]=this['config'][_0x3b1a70(0x1f1)]||{});helper[_0x3b1a70(0x218)](this[_0x3b1a70(0x29d)])&&(process[_0x3b1a70(0x20b)][_0x3b1a70(0x20f)]=!![]);if(!helper[_0x3b1a70(0x1ab)]()){try{process['env']['FRAMEWORK']=_0x23237a,utilities[_0x3b1a70(0x1c6)](_0x1c5ea6[_0x3b1a70(0x26e)],{},this[_0x3b1a70(0x29d)],this[_0x3b1a70(0x283)]);}catch(_0x541816){logger['debug'](_0x3b1a70(0x27c)+_0x541816);}return;}if(helper[_0x3b1a70(0x271)](_0x23237a)){if(global['__isPlaywrightInstalled'])return;_0x1c5ea6[_0x3b1a70(0x1e6)](_0x1c5ea6['dBDhN'](parseInt,helper['getPackageVersion'](_0x1c5ea6['xvMlF'])),0x3)&&(this['config']['useW3C']=![]),_0x1c5ea6['brPpO'](helper['compareVersions'](helper[_0x3b1a70(0x262)](_0x1c5ea6[_0x3b1a70(0x1f2)]),_0x1c5ea6[_0x3b1a70(0x253)]),0x1)&&(this['config']['useW3C']=!![]);}(helper['isUndefined'](this[_0x3b1a70(0x29d)][_0x3b1a70(0x238)])||helper[_0x3b1a70(0x27b)](this[_0x3b1a70(0x29d)]['platforms'][_0x3b1a70(0x250)]))&&(helper[_0x3b1a70(0x27b)](this[_0x3b1a70(0x29d)]['parallelsPerPlatform'])?logger[_0x3b1a70(0x1b9)](_0x1c5ea6['cdBaq']):logger[_0x3b1a70(0x23b)](_0x1c5ea6[_0x3b1a70(0x235)]),this[_0x3b1a70(0x29d)][_0x3b1a70(0x238)]=[]);!this[_0x3b1a70(0x29d)][_0x3b1a70(0x264)]&&(this[_0x3b1a70(0x29d)][_0x3b1a70(0x264)]={});try{process[_0x3b1a70(0x20b)][_0x3b1a70(0x1ee)]=_0x2162fb['_'][0x0],utilities[_0x3b1a70(0x1c6)](_0x1c5ea6[_0x3b1a70(0x26e)],{},this['config'],this[_0x3b1a70(0x283)]);}catch(_0x52a057){logger['debug']('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x52a057);}!this['config'][_0x3b1a70(0x292)]&&logger[_0x3b1a70(0x1b9)](constants[_0x3b1a70(0x29a)]),this[_0x3b1a70(0x257)]=this[_0x3b1a70(0x257)][_0x3b1a70(0x1ea)](this),process['on'](_0x1c5ea6[_0x3b1a70(0x24d)],this[_0x3b1a70(0x257)]),process['on'](_0x1c5ea6['ibCGb'],this['intExitHandler']),process['on'](_0x1c5ea6[_0x3b1a70(0x20e)],this[_0x3b1a70(0x257)]),_0x1c5ea6[_0x3b1a70(0x2a2)](process[_0x3b1a70(0x290)],_0x1c5ea6['gstCq'])?(process['on'](_0x1c5ea6[_0x3b1a70(0x1d6)],this[_0x3b1a70(0x257)]),process['on'](_0x1c5ea6[_0x3b1a70(0x297)],this[_0x3b1a70(0x257)])):process['on'](_0x1c5ea6[_0x3b1a70(0x1c7)],this[_0x3b1a70(0x257)]),process['on'](_0x1c5ea6[_0x3b1a70(0x285)],this[_0x3b1a70(0x287)]());}async[a90_0x577bb2(0x28c)](_0x4c320e){const _0x30f1c5=a90_0x577bb2,_0x370a6d={'VDnDf':'ats-repeater','YfRHx':_0x30f1c5(0x1e7),'LYPOd':_0x30f1c5(0x1e2),'CNUdN':function(_0x528e79,_0x567e13){return _0x528e79===_0x567e13;},'vSmlQ':_0x30f1c5(0x1e1),'SpMHS':function(_0x432d1d,_0x1be330){return _0x432d1d+_0x1be330;},'tfygV':_0x30f1c5(0x1ef),'PIJjc':function(_0x5446a2,_0xfab3a7){return _0x5446a2(_0xfab3a7);},'xjXMI':_0x30f1c5(0x1a8)};this[_0x30f1c5(0x29e)](_0x4c320e);if(helper[_0x30f1c5(0x218)](this[_0x30f1c5(0x29d)])){const _0x5659e7=await helper[_0x30f1c5(0x282)](this['config']);this[_0x30f1c5(0x29d)][_0x30f1c5(0x259)]=_0x5659e7,_0x5659e7[_0x30f1c5(0x21c)]&&helper['isNotUndefined'](this[_0x30f1c5(0x29d)][_0x30f1c5(0x26d)])&&helper[_0x30f1c5(0x249)](this['config'][_0x30f1c5(0x26d)])&&(this[_0x30f1c5(0x29d)][_0x30f1c5(0x1d2)][_0x30f1c5(0x28d)]=_0x370a6d[_0x30f1c5(0x1bb)],this[_0x30f1c5(0x29d)][_0x30f1c5(0x1d2)][_0x370a6d['YfRHx']]=_0x5659e7['customRepeaters']['join'](','),this['config'][_0x30f1c5(0x1d2)][_0x30f1c5(0x232)]=_0x370a6d['LYPOd']),this[_0x30f1c5(0x29d)][_0x30f1c5(0x267)]=_0x5659e7['url'],this[_0x30f1c5(0x283)]&&_0x370a6d[_0x30f1c5(0x22d)](this[_0x30f1c5(0x283)][_0x30f1c5(0x1c4)](),_0x370a6d['vSmlQ'])?this[_0x30f1c5(0x29d)]['turboScaleUrl']=_0x370a6d[_0x30f1c5(0x248)](_0x5659e7['playwrightUrl'],_0x370a6d[_0x30f1c5(0x1cd)]):constants[_0x30f1c5(0x258)]=helper[_0x30f1c5(0x1bd)](this[_0x30f1c5(0x29d)]),logger[_0x30f1c5(0x222)]('HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20'+constants['hubUrl']);}helper[_0x30f1c5(0x1c1)](this[_0x30f1c5(0x29d)]),this[_0x30f1c5(0x239)](),_0x370a6d[_0x30f1c5(0x265)](setPercyFlag,this),await this['setupBrowserstackLocal'](),![_0x370a6d[_0x30f1c5(0x24a)],_0x370a6d['vSmlQ']][_0x30f1c5(0x209)](this['framework'])&&!helper[_0x30f1c5(0x218)](this[_0x30f1c5(0x29d)])&&!helper['getCentralUser']()[_0x30f1c5(0x2a5)]&&await this[_0x30f1c5(0x1fb)]();}async[a90_0x577bb2(0x260)](){const _0x44b6c5=a90_0x577bb2,_0x3a9da1={};_0x3a9da1[_0x44b6c5(0x2a0)]=function(_0x5b0fd0,_0x56c928){return _0x5b0fd0===_0x56c928;},_0x3a9da1[_0x44b6c5(0x1a5)]='false',_0x3a9da1[_0x44b6c5(0x20c)]=_0x44b6c5(0x220),_0x3a9da1[_0x44b6c5(0x237)]='Percy\x20started\x20successfully',_0x3a9da1[_0x44b6c5(0x22a)]=_0x44b6c5(0x1e2),_0x3a9da1['cRmgS']=_0x44b6c5(0x245);const _0x25158b=_0x3a9da1;if(helper[_0x44b6c5(0x249)](this[_0x44b6c5(0x29d)]['percy'])&&(!this[_0x44b6c5(0x241)]||!this[_0x44b6c5(0x241)][_0x44b6c5(0x288)]()))try{this[_0x44b6c5(0x241)]=await percyHelper[_0x44b6c5(0x1b2)](this['config']);if(!this[_0x44b6c5(0x241)]){process[_0x44b6c5(0x20b)][_0x44b6c5(0x213)]=_0x25158b['gQzSn'];throw new Error(_0x25158b['qFJUO']);}logger[_0x44b6c5(0x1b9)](_0x25158b[_0x44b6c5(0x237)]),process['env'][_0x44b6c5(0x213)]=_0x25158b[_0x44b6c5(0x22a)];let _0x5a48c8=0x0;const _0x73b4ad=async()=>{const _0x4df678=_0x44b6c5;_0x5a48c8++,_0x25158b[_0x4df678(0x2a0)](_0x5a48c8,0x1)&&await this['stopPercy']();};process['on'](_0x25158b[_0x44b6c5(0x243)],_0x73b4ad);}catch(_0x14f3fd){process[_0x44b6c5(0x20b)]['BROWSERSTACK_PERCY']=_0x25158b[_0x44b6c5(0x1a5)],logger[_0x44b6c5(0x222)](_0x44b6c5(0x269)+_0x14f3fd);throw new Error(_0x14f3fd[_0x44b6c5(0x1fd)]());}}async['stopPercy'](){const _0x4ffd25=a90_0x577bb2,_0x4ea784={};_0x4ea784[_0x4ffd25(0x276)]=_0x4ffd25(0x24c),_0x4ea784['ODXSB']=_0x4ffd25(0x1c9);const _0x39f368=_0x4ea784;if(this['percy']&&this[_0x4ffd25(0x241)][_0x4ffd25(0x288)]())try{await percyHelper[_0x4ffd25(0x207)](this[_0x4ffd25(0x241)]),logger[_0x4ffd25(0x1b9)](_0x39f368['zlnim']);}catch(_0x50c982){logger[_0x4ffd25(0x224)](_0x39f368[_0x4ffd25(0x240)],_0x50c982[_0x4ffd25(0x1b5)]);}}async['setupBrowserstackLocal'](){const _0x555ac6=a90_0x577bb2,_0x1baf4e={};_0x1baf4e[_0x555ac6(0x1f5)]=_0x555ac6(0x294),_0x1baf4e[_0x555ac6(0x1df)]=_0x555ac6(0x295);const _0x3339d8=_0x1baf4e;if(helper[_0x555ac6(0x1ab)]()&&helper[_0x555ac6(0x249)](this[_0x555ac6(0x29d)][_0x555ac6(0x26d)])&&(!this[_0x555ac6(0x26d)]||!this[_0x555ac6(0x26d)]['isRunning']()))try{if(this[_0x555ac6(0x29d)][_0x555ac6(0x1d2)][_0x555ac6(0x247)]){logger[_0x555ac6(0x222)](_0x3339d8[_0x555ac6(0x1f5)]);return;}this[_0x555ac6(0x26d)]=await helper[_0x555ac6(0x1e5)](this['config']),logger['info'](_0x3339d8[_0x555ac6(0x1df)]);}catch(_0x23eac7){logger[_0x555ac6(0x222)](_0x23eac7);throw new Error(_0x23eac7[_0x555ac6(0x1fd)]());}}async[a90_0x577bb2(0x201)](){const _0x5213c4=a90_0x577bb2,_0x46e358={};_0x46e358['glMbJ']=_0x5213c4(0x1a1),_0x46e358[_0x5213c4(0x23c)]='Error\x20occured\x20while\x20stopping\x20local\x20binary';const _0x574988=_0x46e358;if(this[_0x5213c4(0x26d)]&&this[_0x5213c4(0x26d)]['isRunning']())try{await helper[_0x5213c4(0x208)](this[_0x5213c4(0x26d)]),logger[_0x5213c4(0x1b9)](_0x574988[_0x5213c4(0x274)]);}catch(_0xbfdd6f){logger[_0x5213c4(0x224)](_0x574988[_0x5213c4(0x23c)],_0xbfdd6f[_0x5213c4(0x1b5)]);}}async[a90_0x577bb2(0x1fb)](){const _0x10f2b0=a90_0x577bb2;return PerformanceTester[_0x10f2b0(0x275)](PerformanceAutEvents[_0x10f2b0(0x27a)],async()=>{const _0x10d8dd=_0x10f2b0;await hubAllocator[_0x10d8dd(0x1aa)](this['config']);})();}async['setupTCGAuth'](){const _0xfc377f=a90_0x577bb2,_0x12d1f3={'CslDO':function(_0x27d4ae,_0x536407){return _0x27d4ae(_0x536407);},'STomn':_0xfc377f(0x226),'czcME':function(_0x16f7bb,_0x1ea3f0,_0x4b46e7,_0xd04085,_0x41ccee,_0x489f8d,_0x1d7862){return _0x16f7bb(_0x1ea3f0,_0x4b46e7,_0xd04085,_0x41ccee,_0x489f8d,_0x1d7862);},'Lxkzo':_0xfc377f(0x25d),'yokZt':_0xfc377f(0x25e),'bnknu':_0xfc377f(0x1ca),'CEcow':_0xfc377f(0x296),'IxRGM':function(_0x21e572,_0x4df562){return _0x21e572===_0x4df562;},'LbJWb':_0xfc377f(0x1e2),'HOHTn':function(_0x1fcbdb,_0x22a978){return _0x1fcbdb===_0x22a978;},'AkuRM':function(_0x40d0ab,_0x21fd76){return _0x40d0ab===_0x21fd76;},'BgXNr':_0xfc377f(0x1e8),'qaqno':function(_0x78d355,_0x1cbae6){return _0x78d355===_0x1cbae6;},'qFJbk':_0xfc377f(0x21e),'QLPxR':_0xfc377f(0x1ff),'lkVZb':_0xfc377f(0x1ba),'iMqFc':function(_0x39dafc,_0x1f21da){return _0x39dafc>=_0x1f21da;},'pCmkz':function(_0x1fe048,_0x2a7741){return _0x1fe048<_0x2a7741;},'bIHLF':'tcg\x20config\x20setup\x20successful.','cZnZe':_0xfc377f(0x20a),'frhwo':function(_0x6151a8){return _0x6151a8();}},_0x328cd2=PerformanceTester[_0xfc377f(0x275)](_0x12d1f3[_0xfc377f(0x25c)],async()=>{const _0x271a7b=_0xfc377f;try{const _0x34f05b=new Date(),_0x13044d=helper[_0x271a7b(0x221)](this[_0x271a7b(0x29d)]),_0x248fb5=_0x12d1f3['CslDO'](require,path[_0x271a7b(0x225)](__dirname,_0x12d1f3[_0x271a7b(0x1a4)])),_0x14e742=_0x12d1f3[_0x271a7b(0x1b4)](timeoutPromise,constants[_0x271a7b(0x2a7)],_0x12d1f3['Lxkzo'],_0x12d1f3[_0x271a7b(0x268)],_0x34f05b,this[_0x271a7b(0x29d)],this[_0x271a7b(0x283)]),_0x405039={'tcgUrl':constants[_0x271a7b(0x1c3)],'sdkVersion':_0x12d1f3[_0x271a7b(0x1fe)](require,_0x12d1f3[_0x271a7b(0x1eb)])[_0x271a7b(0x1db)],'methodUsed':_0x12d1f3[_0x271a7b(0x20d)],'proxyConfig':_0x13044d,'os':os[_0x271a7b(0x290)]()};if(_0x13044d&&_0x13044d[_0x271a7b(0x202)]){utilities['fireFunnelTestEvent'](constants[_0x271a7b(0x2a6)],_0x405039,this[_0x271a7b(0x29d)],this[_0x271a7b(0x283)]);return;}const _0x1eb50c={};_0x1eb50c[_0x271a7b(0x228)]=_0x13044d;const _0x5bbc92=await Promise['race']([_0x248fb5[_0x271a7b(0x223)](this[_0x271a7b(0x29d)][_0x271a7b(0x1b6)],this['config'][_0x271a7b(0x1a2)],constants['TCG_URL'],_0x12d1f3[_0x271a7b(0x1fe)](require,_0x12d1f3['bnknu'])[_0x271a7b(0x1db)],_0x1eb50c)['then'](_0x3b897c=>{const _0x4d8540=_0x271a7b;return _0x14e742[_0x4d8540(0x244)](),_0x3b897c;}),_0x14e742]);_0x5bbc92[_0x271a7b(0x284)]=_0x12d1f3['IxRGM'](_0x5bbc92['isHealingEnabled'],_0x12d1f3[_0x271a7b(0x231)])||_0x12d1f3['IxRGM'](_0x5bbc92[_0x271a7b(0x284)],!![]);const _0x4cd9cc=_0x12d1f3[_0x271a7b(0x280)](this[_0x271a7b(0x29d)][_0x271a7b(0x1fa)],!![])||_0x12d1f3[_0x271a7b(0x280)](this[_0x271a7b(0x29d)][_0x271a7b(0x1fa)],_0x12d1f3[_0x271a7b(0x231)]);if(_0x12d1f3[_0x271a7b(0x214)](_0x5bbc92['message'],constants['UPGRADE_REQUIRED'])&&_0x4cd9cc)logger[_0x271a7b(0x1b9)](_0x12d1f3['BgXNr']);else{if(!_0x5bbc92['isAuthenticated']&&_0x12d1f3[_0x271a7b(0x212)](_0x5bbc92[_0x271a7b(0x1e3)],0x1f7)&&_0x4cd9cc)logger[_0x271a7b(0x1b9)](_0x12d1f3[_0x271a7b(0x1d5)]),utilities['fireFunnelTestEvent'](constants['TCG_DOWN'],_0x405039,this[_0x271a7b(0x29d)],this[_0x271a7b(0x283)]);else{if(!_0x5bbc92[_0x271a7b(0x2a1)]&&_0x4cd9cc){logger[_0x271a7b(0x1b9)](_0x12d1f3[_0x271a7b(0x1c0)]);const _0x1d51e1={'tcgUrl':constants[_0x271a7b(0x1c3)],'sdkVersion':_0x12d1f3[_0x271a7b(0x1fe)](require,_0x12d1f3[_0x271a7b(0x1eb)])['version'],'methodUsed':_0x12d1f3[_0x271a7b(0x20d)],'proxyConfig':_0x13044d,'os':os[_0x271a7b(0x290)]()};utilities[_0x271a7b(0x1c6)](constants[_0x271a7b(0x25b)],_0x1d51e1,this[_0x271a7b(0x29d)],this[_0x271a7b(0x283)]);}else{if(_0x5bbc92[_0x271a7b(0x2a1)]&&!_0x5bbc92['isHealingEnabled']&&_0x4cd9cc)logger[_0x271a7b(0x1b9)](_0x12d1f3['lkVZb']);else{if(_0x12d1f3[_0x271a7b(0x28e)](_0x5bbc92[_0x271a7b(0x1e3)],0xc8)&&_0x12d1f3['pCmkz'](_0x5bbc92[_0x271a7b(0x1e3)],0x12c))utilities['fireFunnelTestEvent'](constants['AI_INIT_SUCCESSFUL'],_0x405039,this[_0x271a7b(0x29d)],this['framework']);else{if(_0x12d1f3[_0x271a7b(0x28e)](_0x5bbc92[_0x271a7b(0x1e3)],0x190))_0x405039['status']=_0x5bbc92[_0x271a7b(0x1e3)],utilities[_0x271a7b(0x1c6)](constants['AI_INIT_FAILURE'],_0x405039,this['config'],this['framework']);else!_0x5bbc92[_0x271a7b(0x1e3)]&&utilities['fireFunnelTestEvent'](constants[_0x271a7b(0x286)],_0x405039,this[_0x271a7b(0x29d)],this[_0x271a7b(0x283)]);}}}}}if(_0x5bbc92[_0x271a7b(0x2a1)]&&_0x5bbc92[_0x271a7b(0x284)]){const _0x3cd023={};_0x3cd023['tcgAuthConfig']=_0x5bbc92;const _0x52c190=_0x3cd023;_0x13044d&&(_0x52c190[_0x271a7b(0x24f)]=_0x13044d),_0x52c190[_0x271a7b(0x283)]=this['framework'],_0x52c190['bstackConfig']=this[_0x271a7b(0x29d)],helper[_0x271a7b(0x1d9)](_0x52c190),logger[_0x271a7b(0x222)](_0x12d1f3[_0x271a7b(0x242)]);}}catch(_0x4667af){logger[_0x271a7b(0x222)]('Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20'+(_0x4667af[_0x271a7b(0x1b5)]?_0x4667af[_0x271a7b(0x1b5)]:''));}});await _0x12d1f3[_0xfc377f(0x22e)](_0x328cd2);}[a90_0x577bb2(0x239)](){const _0x2b3869=a90_0x577bb2,_0x436af0={'fZxAR':function(_0x40b20b,_0x3fa07d){return _0x40b20b(_0x3fa07d);},'OzrDV':_0x2b3869(0x1ad)};_0x436af0[_0x2b3869(0x1bc)](require,_0x436af0[_0x2b3869(0x256)])();}[a90_0x577bb2(0x1b3)](){const _0x3b4046=a90_0x577bb2,_0x2a2699={};_0x2a2699[_0x3b4046(0x26a)]='unhandledRejection',_0x2a2699['NSiWH']=_0x3b4046(0x29c);const _0x252ec7=_0x2a2699,_0x2324fb=_0xcaedee=>{const _0x516629=_0x3b4046;logger['error'](_0xcaedee[_0x516629(0x1b5)]),logger[_0x516629(0x222)](util[_0x516629(0x203)](_0xcaedee)),this['unhandledErrors']['push'](util[_0x516629(0x203)]('%j',_0xcaedee)),PerformanceTester[_0x516629(0x230)](_0xcaedee);};process['on'](_0x252ec7[_0x3b4046(0x26a)],_0x2324fb),process['on'](_0x252ec7[_0x3b4046(0x236)],_0x2324fb);}async['intExitHandler'](_0x250aa7){const _0x45b25f=a90_0x577bb2,_0x11988f={};_0x11988f['bFVoI']='5|1|3|2|4|0',_0x11988f[_0x45b25f(0x205)]=function(_0x49e3d0,_0x1e98eb){return _0x49e3d0+_0x1e98eb;},_0x11988f[_0x45b25f(0x1c2)]=_0x45b25f(0x1d7),_0x11988f[_0x45b25f(0x1a3)]=function(_0x1e04f8,_0x3a16eb){return _0x1e04f8+_0x3a16eb;},_0x11988f['qaDXz']=_0x45b25f(0x1ce),_0x11988f[_0x45b25f(0x23d)]=function(_0x21bd63,_0x260137){return _0x21bd63+_0x260137;};const _0x4f6f67=_0x11988f,_0x4639bd=_0x4f6f67[_0x45b25f(0x1dd)][_0x45b25f(0x1bf)]('|');let _0x58dd94=0x0;while(!![]){switch(_0x4639bd[_0x58dd94++]){case'0':await BrowserstackCLI[_0x45b25f(0x273)]()[_0x45b25f(0x26c)]();continue;case'1':this[_0x4f6f67[_0x45b25f(0x205)](_0x4f6f67[_0x45b25f(0x1c2)],_0x250aa7)]=!![];continue;case'2':this[_0x45b25f(0x204)]=_0x250aa7;continue;case'3':logger['info'](_0x4f6f67[_0x45b25f(0x1a3)](_0x4f6f67['qaDXz'],_0x250aa7));continue;case'4':await TestHubHandler['stop'](_0x250aa7);continue;case'5':if(this[_0x4f6f67[_0x45b25f(0x23d)](_0x4f6f67[_0x45b25f(0x1c2)],_0x250aa7)])return;continue;}break;}}[a90_0x577bb2(0x287)](){const _0x37dff8=a90_0x577bb2,_0x4b0ca0={'xBfBp':function(_0x14f046,_0x346685){return _0x14f046===_0x346685;},'Kwvhe':_0x37dff8(0x272),'cpRjg':function(_0x3bbef0,_0x42e808){return _0x3bbef0>_0x42e808;},'RAJXk':function(_0x81b6ce,_0x1fb16e){return _0x81b6ce>_0x1fb16e;},'TllPo':function(_0x2ca499,_0x1929d2){return _0x2ca499(_0x1929d2);},'fZYJk':function(_0x9d63a3){return _0x9d63a3();},'aBHoK':_0x37dff8(0x279)};let _0x28b782=0x0;return async()=>{const _0x2ab00c=_0x37dff8;_0x28b782++;if(_0x4b0ca0[_0x2ab00c(0x1fc)](_0x28b782,0x1)){helper[_0x2ab00c(0x21f)](this[_0x2ab00c(0x283)])&&await this[_0x2ab00c(0x201)]();try{logger[_0x2ab00c(0x222)](_0x4b0ca0[_0x2ab00c(0x289)]),await TestHubHandler['stop'](_0x28b782),await BrowserstackCLI['getInstance']()[_0x2ab00c(0x26c)]('1');}catch(_0x2ca1ff){logger[_0x2ab00c(0x222)]('Error\x20in\x20sending\x20testhub\x20stop:\x20'+util[_0x2ab00c(0x203)](_0x2ca1ff));}PerformanceTester[_0x2ab00c(0x1ae)](PerformanceEvents[_0x2ab00c(0x29f)]);if(PerformanceTester[_0x2ab00c(0x254)]()){const {measures:_0x48f4c5,errors:_0x1d7f76}=await PerformanceTester[_0x2ab00c(0x22f)](),_0x31b2be={};if(_0x48f4c5&&_0x4b0ca0[_0x2ab00c(0x26f)](_0x48f4c5['length'],0x0)||_0x1d7f76&&_0x4b0ca0['RAJXk'](_0x1d7f76[_0x2ab00c(0x250)],0x0)){const _0x465179={};_0x465179['measures']=_0x48f4c5,_0x465179[_0x2ab00c(0x270)]=_0x1d7f76,Object[_0x2ab00c(0x206)](_0x31b2be,_0x465179);}try{const _0x27375c=await helper[_0x2ab00c(0x1a7)](_0x31b2be,this['config']);logger[_0x2ab00c(0x222)](_0x2ab00c(0x22c)+_0x4b0ca0[_0x2ab00c(0x1d3)](getEdsInstrumentationAPIUrl,'')+_0x2ab00c(0x1be)+_0x27375c['statusCode']);}catch(_0xe7d8d7){logger[_0x2ab00c(0x222)](_0x2ab00c(0x215)+_0x4b0ca0['TllPo'](getEdsInstrumentationAPIUrl,'')+_0x2ab00c(0x217)+util[_0x2ab00c(0x203)](_0xe7d8d7));}try{fs[_0x2ab00c(0x219)](path[_0x2ab00c(0x225)](_0x4b0ca0[_0x2ab00c(0x28f)](getLogDir),_0x4b0ca0[_0x2ab00c(0x1e9)]),JSON[_0x2ab00c(0x293)](_0x31b2be));}catch(_0xf05aa4){logger[_0x2ab00c(0x222)](_0x2ab00c(0x27d)+_0xf05aa4);}}}logger&&logger[_0x2ab00c(0x229)](),fileLogger&&fileLogger[_0x2ab00c(0x229)]();};}}exports[a90_0x577bb2(0x227)]=BrowserStackSetup;