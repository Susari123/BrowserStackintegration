const a124_0x3a7f4c=a124_0x2ae1;(function(_0x10839f,_0x3a9222){const _0x49b23c=a124_0x2ae1,_0x30ce55=_0x10839f();while(!![]){try{const _0x309767=parseInt(_0x49b23c(0x137))/0x1+parseInt(_0x49b23c(0xf3))/0x2*(-parseInt(_0x49b23c(0x146))/0x3)+parseInt(_0x49b23c(0x125))/0x4+-parseInt(_0x49b23c(0x12f))/0x5+parseInt(_0x49b23c(0x130))/0x6+parseInt(_0x49b23c(0xed))/0x7*(parseInt(_0x49b23c(0x142))/0x8)+-parseInt(_0x49b23c(0xf8))/0x9;if(_0x309767===_0x3a9222)break;else _0x30ce55['push'](_0x30ce55['shift']());}catch(_0x18e5eb){_0x30ce55['push'](_0x30ce55['shift']());}}}(a124_0x5226,0xeb9ce));function a124_0x2ae1(_0x49ca5c,_0x58b357){const _0x5226d4=a124_0x5226();return a124_0x2ae1=function(_0x2ae18e,_0x213ade){_0x2ae18e=_0x2ae18e-0xed;let _0x53d215=_0x5226d4[_0x2ae18e];return _0x53d215;},a124_0x2ae1(_0x49ca5c,_0x58b357);}const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a124_0x3a7f4c(0xfd)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a124_0x3a7f4c(0x127)),{nestedKeyValue}=require('../helper'),util=require(a124_0x3a7f4c(0x12c)),constants=require(a124_0x3a7f4c(0x149));class RequestQueueHandler{static [a124_0x3a7f4c(0x147)];[a124_0x3a7f4c(0xf0)]=0x0;constructor(){const _0x3e6e70=a124_0x3a7f4c,_0x339c48={};_0x339c48[_0x3e6e70(0xfe)]=_0x3e6e70(0x132),_0x339c48[_0x3e6e70(0x157)]=_0x3e6e70(0x158),_0x339c48[_0x3e6e70(0x100)]='LogCreated',_0x339c48[_0x3e6e70(0x13d)]=_0x3e6e70(0x141),_0x339c48[_0x3e6e70(0x122)]=_0x3e6e70(0xf5),_0x339c48[_0x3e6e70(0x108)]=_0x3e6e70(0x120),_0x339c48[_0x3e6e70(0x13c)]=_0x3e6e70(0x10a),_0x339c48['BAygP']=_0x3e6e70(0x118),_0x339c48[_0x3e6e70(0x114)]=_0x3e6e70(0x156),_0x339c48[_0x3e6e70(0x12a)]=_0x3e6e70(0x12b),_0x339c48['mzKxJ']=_0x3e6e70(0x13b);const _0x318957=_0x339c48,_0x103a40=_0x318957[_0x3e6e70(0xfe)]['split']('|');let _0x49b5bc=0x0;while(!![]){switch(_0x103a40[_0x49b5bc++]){case'0':this[_0x3e6e70(0x14c)]=_0x318957[_0x3e6e70(0x157)];continue;case'1':this['BATCH_EVENT_TYPES']=[_0x318957[_0x3e6e70(0x100)],_0x318957[_0x3e6e70(0x13d)],_0x318957[_0x3e6e70(0x122)],_0x318957[_0x3e6e70(0x108)],_0x318957['aZCYY'],_0x318957[_0x3e6e70(0xfc)],_0x318957[_0x3e6e70(0x114)]];continue;case'2':this[_0x3e6e70(0x13f)]=![];continue;case'3':this[_0x3e6e70(0x10b)]=_0x318957[_0x3e6e70(0x12a)];continue;case'4':this[_0x3e6e70(0x117)]=[];continue;case'5':this[_0x3e6e70(0x115)]=_0x318957[_0x3e6e70(0x121)];continue;case'6':this[_0x3e6e70(0x126)]=null;continue;}break;}}static[a124_0x3a7f4c(0x145)](){const _0x5b157d=a124_0x3a7f4c;return!RequestQueueHandler['instance']&&(RequestQueueHandler[_0x5b157d(0x147)]=new RequestQueueHandler()),RequestQueueHandler[_0x5b157d(0x147)];}[a124_0x3a7f4c(0x148)]=()=>{const _0x3826d7=a124_0x3a7f4c;!this['started']&&(this[_0x3826d7(0x13f)]=!![],this[_0x3826d7(0x104)]());};[a124_0x3a7f4c(0x11b)]=_0x4b956f=>{const _0x2c0d47=a124_0x3a7f4c,_0x5578f7={'PWnxZ':function(_0x5c4f2f,_0x1093dc){return _0x5c4f2f===_0x1093dc;},'xEjmV':'TEST_SCREENSHOT','MioQf':function(_0x25fedf,_0x5ac88f){return _0x25fedf>_0x5ac88f;},'cQjqz':_0x2c0d47(0x153),'RucMa':function(_0x55775e,_0x430b86){return _0x55775e!==_0x430b86;},'IRszZ':_0x2c0d47(0xf5),'TzlMI':function(_0x241d25,_0x4d3fc4){return _0x241d25(_0x4d3fc4);},'ZHulq':_0x2c0d47(0x15c)};if(this[_0x2c0d47(0xfa)][_0x2c0d47(0x144)](_0x4b956f[_0x2c0d47(0x113)])){if(_0x4b956f[_0x2c0d47(0x15a)]&&_0x4b956f[_0x2c0d47(0x15a)][0x0]&&_0x5578f7[_0x2c0d47(0x109)](_0x4b956f[_0x2c0d47(0x15a)][0x0][_0x2c0d47(0x124)],_0x5578f7['xEjmV'])){const _0x351507={};return _0x351507[_0x2c0d47(0xee)]=!![],_0x351507[_0x2c0d47(0x13e)]=[_0x4b956f],_0x351507['proceedWithUrl']=this[_0x2c0d47(0x115)],_0x351507;}if(_0x4b956f[_0x2c0d47(0x15a)]&&_0x5578f7[_0x2c0d47(0x15b)](_0x4b956f['logs'][_0x2c0d47(0x119)],0x0)&&_0x5578f7[_0x2c0d47(0x109)](_0x4b956f[_0x2c0d47(0x15a)][0x0][_0x2c0d47(0x124)],_0x5578f7['cQjqz'])&&_0x5578f7['RucMa'](_0x4b956f[_0x2c0d47(0x113)],_0x5578f7[_0x2c0d47(0x11f)])){const _0x1a6118={};return _0x1a6118[_0x2c0d47(0xee)]=!![],_0x1a6118[_0x2c0d47(0x13e)]=[_0x4b956f],_0x1a6118[_0x2c0d47(0x11d)]=this['uploadAttachmentUrl'],_0x1a6118;}this[_0x2c0d47(0x117)][_0x2c0d47(0x14d)](_0x4b956f);let _0x13c72d=null;const _0xb023db=this[_0x2c0d47(0xee)]();_0xb023db&&(_0x5578f7[_0x2c0d47(0x152)](trace,_0x5578f7[_0x2c0d47(0x135)]),_0x13c72d=this['queue'][_0x2c0d47(0xfb)](0x0,BATCH_SIZE),this[_0x2c0d47(0x117)][_0x2c0d47(0x110)](0x0,BATCH_SIZE),this[_0x2c0d47(0x14f)]());const _0x452f44={};return _0x452f44[_0x2c0d47(0xee)]=_0xb023db,_0x452f44[_0x2c0d47(0x13e)]=_0x13c72d,_0x452f44[_0x2c0d47(0x11d)]=this[_0x2c0d47(0x10b)],_0x452f44;}const _0x21870b={};return _0x21870b[_0x2c0d47(0xee)]=!![],_0x21870b;};[a124_0x3a7f4c(0x10c)]=async()=>{const _0x13df45=a124_0x3a7f4c,_0x52bfb7={'WebcW':'REMOVING','iELLL':function(_0x166444,_0x13d576){return _0x166444>_0x13d576;},'aOlzE':_0x13df45(0xff),'ugAlY':function(_0x2cdaca,_0x3e44a3){return _0x2cdaca(_0x3e44a3);}};await this['uploadPending'](),this[_0x13df45(0x11e)](_0x52bfb7[_0x13df45(0x15d)]);while(_0x52bfb7['iELLL'](this[_0x13df45(0x117)][_0x13df45(0x119)],0x0)){const _0x19a5b9=this[_0x13df45(0x117)][_0x13df45(0xfb)](0x0,BATCH_SIZE);this[_0x13df45(0x117)][_0x13df45(0x110)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x13df45(0x10b)],_0x52bfb7['aOlzE'],_0x19a5b9);}_0x52bfb7['iELLL'](this['pendingUploads'],0x0)&&_0x52bfb7[_0x13df45(0x10d)](debug,_0x13df45(0x103)+this[_0x13df45(0xf0)]);};[a124_0x3a7f4c(0x136)]=async(_0xe8285a,_0x2b6cfd,_0x9331a6)=>{const _0x242af4=a124_0x3a7f4c,_0x2826b6={'ckfqo':function(_0x36511c,_0x43f5ce){return _0x36511c(_0x43f5ce);},'YknBc':_0x242af4(0x139),'FYemw':function(_0x1da053,_0x42cf02){return _0x1da053(_0x42cf02);},'ALkYf':function(_0x58131d){return _0x58131d();},'FZjUD':function(_0x1cdceb,_0x42f495,_0x535beb,_0x59f1ec,_0x194e2b){return _0x1cdceb(_0x42f495,_0x535beb,_0x59f1ec,_0x194e2b);},'RQHDT':_0x242af4(0xf7),'FUVyM':function(_0x5b942a,_0x409b85){return _0x5b942a(_0x409b85);},'zokZt':function(_0x4f0c4a,_0x55a760){return _0x4f0c4a-_0x55a760;},'DZIRZ':function(_0x123513,_0x155a8a){return _0x123513(_0x155a8a);}};let _0x1001ad='';try{_0x1001ad=_0x9331a6[_0x242af4(0xf4)](_0x4f8f0d=>'\x27'+_0x4f8f0d[_0x242af4(0x113)]+'\x27:'+(nestedKeyValue(_0x4f8f0d,[_0x242af4(0x154),_0x242af4(0x15e)])||nestedKeyValue(_0x4f8f0d,[_0x242af4(0x102),_0x242af4(0x15e)])))['join'](','),_0x2826b6['ckfqo'](debug,_0x242af4(0x10f)+_0x2b6cfd+'.\x20Request\x20Size\x20-\x20'+Buffer[_0x242af4(0x112)](util[_0x242af4(0x138)]('%j',_0x9331a6),_0x2826b6['YknBc'])+_0x242af4(0x11c)+_0x1001ad);}catch(_0x49bfad){_0x2826b6[_0x242af4(0x107)](debug,_0x242af4(0x133)+util[_0x242af4(0x138)](_0x49bfad)+'}');}const _0x5cc5a5={'headers':_0x2826b6[_0x242af4(0xf2)](getDefaultHeaders)};try{const _0x78bf31=await _0x2826b6[_0x242af4(0x11a)](nodeRequest,_0x2826b6['RQHDT'],_0xe8285a,_0x9331a6,_0x5cc5a5);if(_0x78bf31[_0x242af4(0x12d)][_0x242af4(0x131)]){const _0x5155b2={};_0x5155b2['message']=_0x78bf31[_0x242af4(0x12d)][_0x242af4(0x131)];throw _0x5155b2;}else _0x2826b6[_0x242af4(0x10e)](debug,_0x2b6cfd+_0x242af4(0x116)+_0x1001ad+_0x242af4(0x159)+util[_0x242af4(0x138)]('%j',_0x78bf31[_0x242af4(0x12d)])),this['pendingUploads']=Math[_0x242af4(0x111)](0x0,_0x2826b6[_0x242af4(0x12e)](this[_0x242af4(0xf0)],_0x9331a6[_0x242af4(0x119)]));}catch(_0x57d777){_0x57d777[_0x242af4(0x151)]?_0x2826b6[_0x242af4(0x155)](debug,'EXCEPTION\x20IN\x20'+_0x2b6cfd+_0x242af4(0xf6)+constants[_0x242af4(0x14e)]+_0x242af4(0xf1)+_0x57d777[_0x242af4(0x151)][_0x242af4(0x13a)]+'\x20'+_0x57d777[_0x242af4(0x151)]['statusText']+'\x20'+util['format']('%j',_0x57d777[_0x242af4(0x151)])):_0x2826b6[_0x242af4(0x128)](debug,'EXCEPTION\x20IN\x20'+_0x2b6cfd+'\x20REQUEST\x20TO\x20'+constants[_0x242af4(0x14e)]+'\x20:\x20'+(_0x57d777[_0x242af4(0x140)]||_0x57d777)),this[_0x242af4(0xf0)]=Math['max'](0x0,_0x2826b6['zokZt'](this[_0x242af4(0xf0)],_0x9331a6[_0x242af4(0x119)]));}};[a124_0x3a7f4c(0x104)]=()=>{const _0x513110=a124_0x3a7f4c,_0x5a9ec0={'TDBzL':function(_0x1a1b0a,_0x4a2f86){return _0x1a1b0a>_0x4a2f86;},'TFgMb':function(_0xbf4a89,_0x3e38f3){return _0xbf4a89(_0x3e38f3);},'TyoEm':_0x513110(0x150),'bmUFh':function(_0x5c6251,_0x5a55ab,_0x365556){return _0x5c6251(_0x5a55ab,_0x365556);}};this['pollEventBatchInterval']=_0x5a9ec0['bmUFh'](setInterval,async()=>{const _0xf46b49=_0x513110;if(_0x5a9ec0['TDBzL'](this['queue'][_0xf46b49(0x119)],0x0)){_0x5a9ec0[_0xf46b49(0xf9)](trace,'Processing\x20events.\x20Queue\x20Length\x20-\x20'+this['queue'][_0xf46b49(0x119)]);const _0x2507e1=this[_0xf46b49(0x117)]['slice'](0x0,BATCH_SIZE);this['queue'][_0xf46b49(0x110)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0xf46b49(0x10b)],_0x5a9ec0['TyoEm'],_0x2507e1),_0x5a9ec0[_0xf46b49(0xf9)](trace,'Remaining\x20Queue\x20Length\x20-\x20'+this[_0xf46b49(0x117)][_0xf46b49(0x119)]);}},BATCH_INTERVAL);};['resetEventBatchPolling']=()=>{const _0xcf133f=a124_0x3a7f4c,_0x551a02={};_0x551a02[_0xcf133f(0x14b)]=_0xcf133f(0xef);const _0x1b49c3=_0x551a02;this[_0xcf133f(0x11e)](_0x1b49c3[_0xcf133f(0x14b)]),this[_0xcf133f(0x104)]();};['removeEventBatchPolling']=_0x2c3514=>{const _0x18731e=a124_0x3a7f4c,_0x62e283={'urNMV':function(_0x27d099,_0x3ad579){return _0x27d099(_0x3ad579);},'kpCCK':function(_0x54ec2c,_0x3c99f4){return _0x54ec2c===_0x3c99f4;},'DSVYN':_0x18731e(0x105)};this[_0x18731e(0x126)]&&(_0x62e283[_0x18731e(0x106)](clearInterval,this[_0x18731e(0x126)]),this[_0x18731e(0x126)]=null,_0x62e283['kpCCK'](_0x2c3514,_0x62e283[_0x18731e(0x14a)])&&(this[_0x18731e(0x13f)]=![]));};[a124_0x3a7f4c(0xee)]=()=>{const _0xbbff1d=a124_0x3a7f4c,_0x246153={};_0x246153[_0xbbff1d(0x123)]=function(_0x7e952b,_0x2e3b31){return _0x7e952b>=_0x2e3b31;};const _0x414a8b=_0x246153;return _0x414a8b[_0xbbff1d(0x123)](this[_0xbbff1d(0x117)][_0xbbff1d(0x119)],BATCH_SIZE);};async[a124_0x3a7f4c(0x101)](_0x2945d3=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x1a161f=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x33c8f0=a124_0x3a7f4c,_0x436073={'QQdXJ':function(_0x293900,_0xa1204d){return _0x293900<=_0xa1204d;},'aUxPF':function(_0x194f22,_0x121599){return _0x194f22(_0x121599);},'fqAxF':function(_0x191a63,_0xecb983){return _0x191a63-_0xecb983;}};if(_0x436073[_0x33c8f0(0x143)](this[_0x33c8f0(0xf0)],0x0)||_0x436073[_0x33c8f0(0x143)](_0x2945d3,0x0))return;return await _0x436073['aUxPF'](sleep,_0x1a161f),this['uploadPending'](_0x436073[_0x33c8f0(0x134)](_0x2945d3,_0x1a161f));}}module[a124_0x3a7f4c(0x129)]=RequestQueueHandler;function a124_0x5226(){const _0xbb9536=['Exception\x20in\x20logging\x20batch\x20events\x20--\x20','fqAxF','ZHulq','batchAndPostEvents','1158414XSMhYb','format','utf8','status','api/v1/screenshots','aZCYY','WtHeS','proceedWithData','started','message','CBTSessionCreated','8AwHshE','QQdXJ','includes','getInstance','2761935etRoKX','instance','start','../../bin/utils/constants','DSVYN','oSzoc','uploadAttachmentUrl','push','TEST_REPORTING_ANALYTICS','resetEventBatchPolling','Interval-Queue','response','TzlMI','TEST_ATTACHMENT','test_run','ckfqo','HookRunStarted','mTvzI','upload-attachments','\x20--\x20','logs','MioQf','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','WebcW','uuid','1422589roBQjK','shouldProceed','RESETTING','pendingUploads','\x20:\x20','ALkYf','2fhptUb','map','TestRunFinished','\x20REQUEST\x20TO\x20','POST','13072833MxhKqu','TFgMb','BATCH_EVENT_TYPES','slice','BAygP','./constants','ceDiH','Shutdown-Queue','mlACV','uploadPending','hook_run','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','startEventBatchPolling','REMOVING','urNMV','FYemw','OQSeH','PWnxZ','HookRunFinished','eventUrl','shutdown','ugAlY','FUVyM','Processing\x20batch\x20events\x20for\x20','splice','max','byteLength','event_type','iuxpW','screenshotEventUrl','\x20event\x20successful\x20for\x20events\x20','queue','TestRunStarted','length','FZjUD','add','\x20bytes.\x20Events\x20are\x20','proceedWithUrl','removeEventBatchPolling','IRszZ','TestRunSkipped','mzKxJ','dNBXb','RduSQ','kind','5992300pGXcvu','pollEventBatchInterval','./utils','DZIRZ','exports','cLktG','api/v1/batch','util','data','zokZt','1270555NgkqKf','4395882iTSdSI','error','4|2|3|5|0|1|6'];a124_0x5226=function(){return _0xbb9536;};return a124_0x5226();}