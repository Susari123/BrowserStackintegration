const a28_0x4829eb=a28_0x2c0a;(function(_0x1b152b,_0x9804d8){const _0xf75490=a28_0x2c0a,_0x18a883=_0x1b152b();while(!![]){try{const _0x299de1=parseInt(_0xf75490(0x10c))/0x1+-parseInt(_0xf75490(0xee))/0x2+parseInt(_0xf75490(0x119))/0x3+-parseInt(_0xf75490(0xf7))/0x4*(-parseInt(_0xf75490(0x101))/0x5)+-parseInt(_0xf75490(0x121))/0x6+parseInt(_0xf75490(0xfd))/0x7*(-parseInt(_0xf75490(0x108))/0x8)+parseInt(_0xf75490(0xf2))/0x9;if(_0x299de1===_0x9804d8)break;else _0x18a883['push'](_0x18a883['shift']());}catch(_0x17a68a){_0x18a883['push'](_0x18a883['shift']());}}}(a28_0xc258,0xd7964));const fs=require('fs'),path=require(a28_0x4829eb(0x124)),Promise=require(a28_0x4829eb(0xfc)),yaml=require(a28_0x4829eb(0x125)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require(a28_0x4829eb(0xf3))[a28_0x4829eb(0xef)],AWSUtils=require(a28_0x4829eb(0xf3)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require(a28_0x4829eb(0x10d));function a28_0x2c0a(_0x3d4ad7,_0x2cc9f0){const _0xc258f3=a28_0xc258();return a28_0x2c0a=function(_0x2c0a91,_0xd76dbb){_0x2c0a91=_0x2c0a91-0xee;let _0x5ab084=_0xc258f3[_0x2c0a91];return _0x5ab084;},a28_0x2c0a(_0x3d4ad7,_0x2cc9f0);}Promise[a28_0x4829eb(0xf8)](fs);function a28_0xc258(){const _0x578f76=['943362EgmzQP','browserstack:cluster','DLnrA','CAPABILITY_NAMED_IAM','305OPOguX','join','Parameters','hub-ha.yaml','VpcId','gcCel','CFTemplates','8RsXnyy','StackId','info','waitFor','1417057urZEnD','../config/logger','://','LgBdP','promise','DELETE','schema','createHubHaStack','HtNrW','stringify','Value','push','idpKq','448509QQkmLi','-cf','jNgCp','readFileAsync','load','toString','StackName','valueOf','8015160gzdkOq','apiVersion','createStack','path','js-yaml','ivAOM','getOidcUrl','MgWFT','908558eNoZvh','awsObj','Key','Resources','6693759AfXwlV','./AWSUtils','split','aKqFs','fFTcz','32632PvmCXw','promisifyAll','OnFailure','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','Properties','bluebird'];a28_0xc258=function(){return _0x578f76;};return a28_0xc258();}const addTags=async(_0x5ad09f,_0x3e6e99)=>{const _0x4e46bb=a28_0x4829eb;for(const _0x3d17b4 in _0x5ad09f[_0x4e46bb(0xf1)]){_0x5ad09f['Resources'][_0x3d17b4][_0x4e46bb(0xfb)]&&_0x5ad09f[_0x4e46bb(0xf1)][_0x3d17b4][_0x4e46bb(0xfb)]['Tags']&&_0x5ad09f['Resources'][_0x3d17b4][_0x4e46bb(0xfb)]['Tags']['push'](..._0x3e6e99);}};exports[a28_0x4829eb(0x113)]=async(_0x1c1478,_0x55b110=null)=>{const _0xbff98c=a28_0x4829eb,_0x40495f={'HtNrW':_0xbff98c(0xfe),'UPdTn':'browserstack:creationDate','ivAOM':'2010-05-15','LgBdP':_0xbff98c(0x107),'rahTT':_0xbff98c(0x104),'fFTcz':'utf-8','MgWFT':function(_0x4ef2d3,_0x57a8ef,_0x666096){return _0x4ef2d3(_0x57a8ef,_0x666096);},'DLnrA':_0xbff98c(0x10e),'jNgCp':_0xbff98c(0x111),'zTScU':_0xbff98c(0x105),'gcCel':'BaseResourceName','aKqFs':'ClusterOIDCURL','khfgW':_0xbff98c(0x100),'JKGSQ':_0xbff98c(0xfa),'idpKq':'stackCreateComplete'},_0x51781e=COMMON_HST_TAGS,_0x22b683={};_0x22b683[_0xbff98c(0xf0)]=_0x40495f[_0xbff98c(0x114)],_0x22b683[_0xbff98c(0x116)]=_0x1c1478,_0x51781e[_0xbff98c(0x117)](_0x22b683),_0x51781e[_0xbff98c(0x117)]({'Key':_0x40495f['UPdTn'],'Value':new Date()[_0xbff98c(0x120)]()[_0xbff98c(0x11e)]()});const _0x591e5f={};_0x591e5f[_0xbff98c(0x122)]=_0x40495f[_0xbff98c(0x126)];const _0x2db68b=new AWS['CloudFormation'](_0x591e5f),_0x226ea4=await fs[_0xbff98c(0x11c)](path[_0xbff98c(0x102)](__dirname,'..',_0x40495f[_0xbff98c(0x10f)],_0x40495f['rahTT']),_0x40495f[_0xbff98c(0xf6)]),_0x30aace={};_0x30aace[_0xbff98c(0x112)]=CLOUDFORMATION_SCHEMA;const _0x473455=yaml[_0xbff98c(0x11d)](_0x226ea4,_0x30aace);await _0x40495f[_0xbff98c(0x128)](addTags,_0x473455,_0x51781e);const _0x241c4f=JSON[_0xbff98c(0x115)](_0x473455);let _0x5b984d=await AWSUtils[_0xbff98c(0x127)](_0x1c1478);_0x5b984d=_0x5b984d[_0xbff98c(0xf4)](_0x40495f[_0xbff98c(0xff)])[0x1];const _0xa734f5={};_0xa734f5[_0xbff98c(0x11f)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1c1478+_0xbff98c(0x11a),_0xa734f5[_0xbff98c(0xf9)]=_0x40495f[_0xbff98c(0x11b)],_0xa734f5['TemplateBody']=_0x241c4f,_0xa734f5[_0xbff98c(0x103)]=[{'ParameterKey':_0x40495f['zTScU'],'ParameterValue':_0x55b110},{'ParameterKey':_0x40495f[_0xbff98c(0x106)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1c1478},{'ParameterKey':_0x40495f[_0xbff98c(0xf5)],'ParameterValue':_0x5b984d}],_0xa734f5['Capabilities']=[_0x40495f['khfgW']],_0xa734f5['Tags']=_0x51781e;const _0x326966=_0xa734f5,_0x3fe990=await _0x2db68b[_0xbff98c(0x123)](_0x326966)[_0xbff98c(0x110)]();logger[_0xbff98c(0x10a)](_0x40495f['JKGSQ']);const _0x2bf13f={};return _0x2bf13f[_0xbff98c(0x11f)]=_0x3fe990[_0xbff98c(0x109)],_0x2db68b[_0xbff98c(0x10b)](_0x40495f[_0xbff98c(0x118)],_0x2bf13f)[_0xbff98c(0x110)]();};